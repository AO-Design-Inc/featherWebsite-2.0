import{S as Rp,i as Pp,s as Cp,e as t,j as i,a1 as Tf,k as Bm,a0 as xf,c as n,d as a,l as c,a2 as Sf,b as d,E as e,f as r,F as as,a3 as Af,t as p,v as Ym,a as o,g as l,w as Um,_ as Pa,D as ya,x as Jm,p as qm,n as Xm,A as Vm}from"./vendor-08ba1c64.js";function If(ua){let g,R,N,x;return{c(){g=t("link"),R=i(),N=new Tf,x=Bm(),this.h()},l(E){const C=xf('[data-svelte="svelte-r30au3"]',document.head);g=n(C,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),C.forEach(a),R=c(E),N=Sf(E),x=Bm(),this.h()},h(){d(g,"rel","stylesheet"),d(g,"href","https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"),d(g,"integrity","sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"),d(g,"crossorigin","anonymous"),N.a=x},m(E,C){e(document.head,g),r(E,R,C),N.m(ua[0],E,C),r(E,x,C)},p(E,[C]){C&1&&N.p(E[0])},i:as,o:as,d(E){a(g),E&&a(R),E&&a(x),E&&N.d()}}}function Rf(ua,g,R){let N,{math:x}=g,{displayMode:E=!1}=g;const C={displayMode:E,throwOnError:!1};return ua.$$set=S=>{"math"in S&&R(1,x=S.math),"displayMode"in S&&R(2,E=S.displayMode)},ua.$$.update=()=>{ua.$$.dirty&2&&R(0,N=Af.renderToString(x,C))},[N,x,E]}class $m extends Rp{constructor(g){super();Pp(this,g,Rf,If,Cp,{math:1,displayMode:2})}}function Pf(ua){let g,R,N,x,E,C,S,ue,Xe,D,ea,va,te,H,Me,aa,O,De,B,he,Ve,ge,F,sa,P,ta,_e,Ee,J,ne,Q,oe,ha,q,de,We,$e,X,Oe,Te,ee,ae,ke,V,me,Fe,fe,Le,pe,xe,se,da,we,M,na=`<code class="language-jsx"><span class="token keyword">const</span> <span class="token constant">START_X_TOTAL</span><span class="token operator">:</span> f32 <span class="token operator">=</span> <span class="token number">0.300283</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">START_Y_TOTAL</span><span class="token operator">:</span> f32 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.48857</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">WINDOW</span><span class="token operator">:</span> f32 <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">step_X</span><span class="token operator">:</span> f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span> <span class="token operator">/</span> <span class="token function">f32</span><span class="token punctuation">(</span>canvas_width<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">step_Y</span><span class="token operator">:</span> f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span> <span class="token operator">/</span> <span class="token function">f32</span><span class="token punctuation">(</span>canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">ITER_CONST</span><span class="token operator">:</span> i32 <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></code>`,ka,Y,$,be,oa,le,ga='<code class="language-jsx"><span class="token keyword">const</span> <span class="token constant">N_THREADS</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></code>',K,U,ma,L,je,Se,pa,Z,Ae,Ie,ze,re,Ge,ie,k,y,W,Re,Ne,_a,ye,Ea,Ta,ce,j,Ca,He,la,Ma,Be,ra,Da,Ye,Ke,Wa,Ue,ve,Pe,xa,z,Ze,ia,Je,fa,Sa,Na,Oa,_,Ha,Ka,wa,Aa,ss,u,f,ca,us,Fa,ts=`<code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">&#123;</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">real<span class="token punctuation">,</span> imag</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> real<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> imag<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">//Function that add this complex number with another complex number, cplx</span>
	<span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">cplx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">+=</span> cplx<span class="token punctuation">.</span>real<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">+=</span> cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">//Fuction that returns the magnitude of this complex number</span>
	<span class="token function">mag</span><span class="token punctuation">(</span><span class="token parameter">cplx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>real<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">//Function that multiplies this complex number with another complex number, cplx</span>
	<span class="token function">mul</span><span class="token punctuation">(</span><span class="token parameter">cplx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">const</span> real_part <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">*</span> cplx<span class="token punctuation">.</span>real <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">const</span> imag_part <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> cplx<span class="token punctuation">.</span>real <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">*</span> cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> real_part<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> imag_part<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code>`,hs,Ba,Ya,ds,La,ns=`<code class="language-jsx"><span class="token keyword">function</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span><span class="token parameter">cplx</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">mag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">&lt;</span> <span class="token constant">ITER_CONST</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		z <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">mul</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cplx<span class="token punctuation">)</span><span class="token punctuation">;</span>
		count<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Ua,Za,os,Ja,qa,Ia,Xa,ja,ps,h,v,Ra,ws,bs,Qa,ys=`<code class="language-jsx"><span class="token comment">//This is in the main function which calls the workers to do the work</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"worker.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">INDEXES_PER_WORKER</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">X_LEN</span><span class="token operator">*</span><span class="token constant">Y_LEN</span><span class="token punctuation">)</span><span class="token operator">/</span>workerCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">N_ROWS_PER_THREAD</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token constant">X_LEN</span><span class="token operator">/</span>workerCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">START_XC</span> <span class="token operator">=</span> <span class="token constant">N_ROWS_PER_THREAD</span> <span class="token operator">*</span> i<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">START_INDEX</span> <span class="token operator">=</span> i<span class="token operator">*</span><span class="token constant">INDEXES_PER_WORKER</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">END_INDEX</span><span class="token operator">=</span> <span class="token constant">START_INDEX</span> <span class="token operator">+</span> <span class="token constant">INDEXES_PER_WORKER</span><span class="token punctuation">;</span>

  worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span>data<span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token constant">COMPUTED_ROWS</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
    points_array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token constant">COMPUTED_ROWS</span><span class="token punctuation">;</span>
     doneCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>doneCount <span class="token operator">==</span> workerCount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      points_array <span class="token operator">=</span> points_array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


      <span class="token function">draw</span><span class="token punctuation">(</span>points_array<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span></code>`,vs,za,et=`<code class="language-jsx"><span class="token comment">//This is how it looks now in the worker function</span>
<span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token constant">START_XC</span><span class="token punctuation">,</span> <span class="token constant">STEP_X</span><span class="token punctuation">,</span> <span class="token constant">STEP_Y</span><span class="token punctuation">,</span> <span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">,</span> <span class="token constant">Y_LEN</span> <span class="token punctuation">&#125;</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
	<span class="token keyword">const</span> points_in_thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token constant">Y_LEN</span> <span class="token operator">*</span> <span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>
		<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span> <span class="token operator">+</span> <span class="token constant">START_XC</span> <span class="token operator">*</span> <span class="token constant">STEP_X</span><span class="token punctuation">,</span> count_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		count_x <span class="token operator">&lt;</span> <span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">;</span>
		x <span class="token operator">+=</span> <span class="token constant">STEP_X</span><span class="token punctuation">,</span> count_x<span class="token operator">++</span>
	<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">,</span> count_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_y <span class="token operator">&lt;</span> <span class="token constant">Y_LEN</span><span class="token punctuation">;</span> y <span class="token operator">+=</span> <span class="token constant">STEP_Y</span><span class="token punctuation">,</span> count_y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			points_in_thread<span class="token punctuation">[</span>count_x <span class="token operator">*</span> <span class="token constant">Y_LEN</span> <span class="token operator">+</span> count_y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">postMessage</span><span class="token punctuation">(</span>points_in_thread<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,gs,Va,_s,ls,rs,Es,Ts,is,xs,$t,Ss,Kt=`<code class="language-jsx"><span class="token comment">//This is in the main function which calls the workers to do the work</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"benchmarks/multithreaded-js/sharedworker.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">;</span>

    worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"worker finished"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">returnSharedBufferjs</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span> <span class="token constant">START_Y_TOTAL</span><span class="token punctuation">,</span> <span class="token constant">CANVAS_WIDTH</span><span class="token punctuation">,</span> <span class="token constant">CANVAS_HEIGHT</span><span class="token punctuation">,</span> <span class="token constant">WINDOW</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

  <span class="token keyword">const</span> <span class="token constant">X_LEN</span> <span class="token operator">=</span> <span class="token constant">CANVAS_WIDTH</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">Y_LEN</span> <span class="token operator">=</span> <span class="token constant">CANVAS_HEIGHT</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> window <span class="token operator">=</span> <span class="token constant">WINDOW</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">STEP_X</span> <span class="token operator">=</span> window<span class="token operator">/</span><span class="token constant">X_LEN</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token constant">STEP_Y</span> <span class="token operator">=</span> window<span class="token operator">/</span><span class="token constant">Y_LEN</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> workerCount <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sharedBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SharedArrayBuffer</span><span class="token punctuation">(</span><span class="token constant">X_LEN</span><span class="token operator">*</span><span class="token constant">Y_LEN</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sharedArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8ClampedArray</span><span class="token punctuation">(</span>sharedBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  sharedArray<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token constant">N_ROWS_PER_THREAD</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token constant">X_LEN</span><span class="token operator">/</span>workerCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">START_YC</span> <span class="token operator">=</span> <span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> parameters <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span><span class="token constant">START_Y_TOTAL</span><span class="token punctuation">,</span> <span class="token constant">START_YC</span><span class="token punctuation">,</span> <span class="token constant">STEP_X</span><span class="token punctuation">,</span> <span class="token constant">STEP_Y</span><span class="token punctuation">,</span> <span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">,</span> <span class="token constant">X_LEN</span><span class="token punctuation">,</span> sharedArray<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>workerCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

    parameters<span class="token punctuation">.</span><span class="token constant">START_YC</span> <span class="token operator">=</span> <span class="token constant">N_ROWS_PER_THREAD</span> <span class="token operator">*</span> i<span class="token punctuation">;</span>

    promises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">createWorker</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span></code>`,Zt,As,ks=`<code class="language-jsx"><span class="token comment">//This is how it looks now in the worker function</span>
<span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">const</span> <span class="token punctuation">&#123;</span>
		<span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span>
		<span class="token constant">START_Y_TOTAL</span><span class="token punctuation">,</span>
		<span class="token constant">START_YC</span><span class="token punctuation">,</span>
		<span class="token constant">STEP_X</span><span class="token punctuation">,</span>
		<span class="token constant">STEP_Y</span><span class="token punctuation">,</span>
		<span class="token constant">N_ROWS_PER_THREAD</span><span class="token punctuation">,</span>
		<span class="token constant">X_LEN</span><span class="token punctuation">,</span>
		sharedArray
	<span class="token punctuation">&#125;</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>
		<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token constant">START_Y_TOTAL</span> <span class="token operator">+</span> <span class="token constant">START_YC</span> <span class="token operator">*</span> <span class="token constant">STEP_Y</span><span class="token punctuation">,</span> count_y <span class="token operator">=</span> <span class="token constant">START_YC</span><span class="token punctuation">;</span>
		count_y <span class="token operator">&lt;</span> <span class="token constant">N_ROWS_PER_THREAD</span> <span class="token operator">+</span> <span class="token constant">START_YC</span><span class="token punctuation">;</span>
		y <span class="token operator">+=</span> <span class="token constant">STEP_Y</span><span class="token punctuation">,</span> count_y<span class="token operator">++</span>
	<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span> count_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_x <span class="token operator">&lt;</span> <span class="token constant">X_LEN</span><span class="token punctuation">;</span> x <span class="token operator">+=</span> <span class="token constant">STEP_X</span><span class="token punctuation">,</span> count_x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>count_x <span class="token operator">+</span> count_y <span class="token operator">*</span> <span class="token constant">X_LEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			val <span class="token operator">=</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			sharedArray<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
			sharedArray<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
			sharedArray<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
			sharedArray<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code>`,Qt,ms,en,Is,Bs,an,$a,at,st,tt,nt,Qe,sn,Ys,tn,ot,G,Us,nn,on,es,pn,fs,ln,ql,pt,Xl,Vl,$l,Vn,Kl,Zl,lt,Ql,$n,er,ar,sr,rt,tr,it,nr,or,pr,ct,lr,Kn,rr,ir,cr,Zn,ur,hr,Qn,dr,kr,eo,ao,mr,fr,ut,ht,wr,so,br,yr,vr,to,gr,Mp,Dp,Wp,Op,rn,cn,no,_r,Er,Fp,Lp,jp,zp,dt,Tr,oo,xr,Gp,T,po,Sr,Ar,lo,Ir,Rr,kt,Pr,mt,Cr,Mr,Dr,cs,Wr,ro,Or,Fr,io,Lr,jr,co,zr,Gr,Nr,un,Qm=`<code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">in_mandelbrot</span><span class="token punctuation">(</span>cplx<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Complex</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">u8</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token constant">ITER_CONST</span><span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> z <span class="token operator">=</span> <span class="token function">build_complex</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> count<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> z<span class="token punctuation">.</span><span class="token function">mag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2.0</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">&lt;</span> <span class="token constant">ITER_CONST</span> <span class="token punctuation">&#123;</span>
        z <span class="token operator">=</span> <span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>cplx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// z = z^2 + cplx</span>
        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span> count <span class="token operator">></span> <span class="token number">255</span> <span class="token punctuation">&#123;</span>
        count <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    count <span class="token keyword">as</span> <span class="token keyword">u8</span>
<span class="token punctuation">&#125;</span></code>`,Hr,uo,Br,Yr,hn,ef=`<code class="language-rust"><span class="token attribute attr-name">#[wasm_bindgen]</span>
<span class="token keyword">extern</span> <span class="token string">"C"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">pub</span> <span class="token keyword">type</span> <span class="token type-definition class-name">ImageData</span><span class="token punctuation">;</span>

    <span class="token attribute attr-name">#[wasm_bindgen(constructor, catch)]</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Uint8ClampedArray</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token keyword">f64</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token keyword">f64</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">ImageData</span><span class="token punctuation">,</span> <span class="token class-name">JsValue</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token attribute attr-name">#[wasm_bindgen]</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span>start_x<span class="token punctuation">:</span> <span class="token keyword">f64</span><span class="token punctuation">,</span> start_y<span class="token punctuation">:</span> <span class="token keyword">f64</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span> window<span class="token punctuation">:</span> <span class="token keyword">f64</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">ImageData</span><span class="token punctuation">&#123;</span>

    <span class="token keyword">let</span> y_len<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> height <span class="token keyword">as</span> <span class="token keyword">i32</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> x_len<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> width <span class="token keyword">as</span> <span class="token keyword">i32</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> pixels<span class="token punctuation">:</span> <span class="token keyword">usize</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x_len <span class="token operator">*</span> y_len<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">usize</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> <span class="token keyword">mut</span> points_array <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">;</span> pixels<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">fill_mandelbrot</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> points_array<span class="token punctuation">,</span> start_x<span class="token punctuation">,</span> start_y<span class="token punctuation">,</span> x_len<span class="token punctuation">,</span> y_len<span class="token punctuation">,</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> pointer <span class="token operator">=</span> points_array<span class="token punctuation">.</span><span class="token function">as_ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">usize</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> mem <span class="token operator">=</span> <span class="token namespace">wasm_bindgen<span class="token punctuation">::</span></span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unchecked_into</span><span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token class-name">WebAssembly</span><span class="token punctuation">::</span><span class="token class-name">Memory</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> new_array <span class="token operator">=</span> <span class="token class-name">Uint8ClampedArray</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mem<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>pointer <span class="token keyword">as</span> <span class="token keyword">u32</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>pointer <span class="token operator">+</span> pixels<span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">u32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ImageData</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>new_array<span class="token punctuation">,</span> x_len<span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y_len<span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code>`,Ur,Rs,Jr,ft,qr,Xr,ho,Vr,$r,Kr,ko,Zr,Qr,wt,ei,mo,ai,si,ti,fo,ni,oi,dn,af=`<code class="language-bash"><span class="token function">sed</span> <span class="token string">'/importW/d;s/^export//g;/default/d'</span> pkg/Mandelbrot.js <span class="token operator">></span> tmp_mandel_import.js
<span class="token function">cat</span> tmp_mandel_import.js  mandel_src.js <span class="token operator">></span> Mandelbrot.js
<span class="token function">rm</span> tmp_mandel_import.js</code>`,pi,wo,li,ri,bo,ii,ci,bt,ui,yt,hi,di,ki,Js,yo,mi,fi,vo,wi,bi,yi,go,vi,Np,Hp,Bp,Yp,Up,vt,gi,_o,_i,Jp,w,Eo,Ei,Ti,To,xi,Si,kn,sf=`<code class="language-jsx">declare <span class="token keyword">const</span> <span class="token literal-property property">canvas_width</span><span class="token operator">:</span> i32<span class="token punctuation">;</span>
declare <span class="token keyword">const</span> <span class="token literal-property property">canvas_height</span><span class="token operator">:</span> i32<span class="token punctuation">;</span>
declare <span class="token keyword">const</span> <span class="token constant">ITER_CONST</span><span class="token operator">:</span> i16<span class="token punctuation">;</span>
declare <span class="token keyword">const</span> <span class="token constant">START_X_TOTAL</span><span class="token operator">:</span>f32
declare <span class="token keyword">const</span> <span class="token constant">START_Y_TOTAL</span><span class="token operator">:</span>f32
declare <span class="token keyword">const</span> <span class="token constant">WINDOW</span><span class="token operator">:</span>f32

@unmanaged
<span class="token keyword">class</span> <span class="token class-name">Complex</span> <span class="token punctuation">&#123;</span>
	<span class="token literal-property property">real</span><span class="token operator">:</span> f64 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token literal-property property">imag</span><span class="token operator">:</span> f64 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">real</span><span class="token operator">:</span>f64<span class="token punctuation">,</span> <span class="token literal-property property">imag</span><span class="token operator">:</span>f64</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> real<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> imag<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	@inline
	<span class="token function">add</span><span class="token punctuation">(</span>cplx<span class="token operator">:</span> Complex<span class="token punctuation">)</span><span class="token operator">:</span> Complex <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">+</span> cplx<span class="token punctuation">.</span>real<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">+</span> cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	@inline
	<span class="token function">mag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> f64 <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>

	@inline
	<span class="token function">mul</span><span class="token punctuation">(</span>cplx<span class="token operator">:</span> Complex<span class="token punctuation">)</span><span class="token operator">:</span> Complex <span class="token punctuation">&#123;</span>
		<span class="token keyword">const</span> __tempr  <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real<span class="token operator">*</span>cplx<span class="token punctuation">.</span>real <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag<span class="token operator">*</span>cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">const</span> __tempi <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imag<span class="token operator">*</span>cplx<span class="token punctuation">.</span>real <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>real<span class="token operator">*</span>cplx<span class="token punctuation">.</span>imag<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> __tempr<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> __tempi<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span>
	<span class="token punctuation">&#125;</span>

	<span class="token function">set</span><span class="token punctuation">(</span>real<span class="token operator">:</span>f64<span class="token punctuation">,</span><span class="token literal-property property">imag</span><span class="token operator">:</span>f64<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>real <span class="token operator">=</span> real<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>imag <span class="token operator">=</span> imag<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token literal-property property">z</span><span class="token operator">:</span>Complex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token literal-property property">cplx</span><span class="token operator">:</span>Complex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Complex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

@inline
<span class="token keyword">function</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">real</span><span class="token operator">:</span>f64<span class="token punctuation">,</span><span class="token literal-property property">imag</span><span class="token operator">:</span>f64</span><span class="token punctuation">)</span><span class="token operator">:</span>i16<span class="token punctuation">&#123;</span>
	z<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
	cplx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>real<span class="token punctuation">,</span>imag<span class="token punctuation">)</span>

	<span class="token keyword">let</span> <span class="token literal-property property">count</span><span class="token operator">:</span>i16 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> z<span class="token punctuation">.</span><span class="token function">mag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">;</span> count<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token punctuation">(</span>z<span class="token punctuation">.</span><span class="token function">mul</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cplx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// z = z^2 + cplx</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token constant">ITER_CONST</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*
stores array of i16s at start of memory
corresponding to escape count at pixels in
array
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">let</span> memcounter <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">const</span> <span class="token literal-property property">step_X</span><span class="token operator">:</span>f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span><span class="token operator">/</span><span class="token function">f32</span><span class="token punctuation">(</span>canvas_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token literal-property property">step_Y</span><span class="token operator">:</span>f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span><span class="token operator">/</span><span class="token function">f32</span><span class="token punctuation">(</span>canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token constant">START_Y_TOTAL</span><span class="token punctuation">,</span> count_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_y <span class="token operator">&lt;</span> canvas_height<span class="token punctuation">;</span> y <span class="token operator">+=</span> step_Y<span class="token punctuation">,</span> count_y<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span> count_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_x <span class="token operator">&lt;</span> canvas_width<span class="token punctuation">;</span> x <span class="token operator">+=</span> step_X<span class="token punctuation">,</span> count_x<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			store<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i16</span><span class="token punctuation">></span></span><span class="token plain-text">(memcounter, mandelbrot(x,y));
			memcounter += 2
		&#125;
	&#125;
&#125;</span></code>`,Ai,gt,Ii,xo,Ri,Pi,Ci,So,Mi,Di,_t,Wi,Et,Oi,Fi,Li,mn,tf=`<code class="language-jsx">Cross<span class="token operator">-</span>Origin<span class="token operator">-</span>Opener<span class="token operator">-</span>Policy<span class="token operator">:</span> same<span class="token operator">-</span>origin
Cross<span class="token operator">-</span>Origin<span class="token operator">-</span>Embedder<span class="token operator">-</span>Policy<span class="token operator">:</span> require<span class="token operator">-</span>corp</code>`,ji,Ao,zi,Gi,Tt,Ni,xt,Hi,Bi,Yi,fn,St,Uh,Ui,Io,Ji,qi,Ro,Xi,Vi,wn,nf=`<code class="language-jsx">@inline
<span class="token keyword">function</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c_r</span><span class="token operator">:</span>f64<span class="token punctuation">,</span> <span class="token literal-property property">c_i</span><span class="token operator">:</span>f64</span><span class="token punctuation">)</span><span class="token operator">:</span>i16<span class="token punctuation">&#123;</span>
	<span class="token keyword">let</span> <span class="token literal-property property">count</span><span class="token operator">:</span>i16 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> <span class="token literal-property property">z_r</span><span class="token operator">:</span>f64 <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token literal-property property">z_i</span><span class="token operator">:</span>f64 <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token literal-property property">t_r</span><span class="token operator">:</span>f64 <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token literal-property property">t_i</span><span class="token operator">:</span>f64 <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> z_r<span class="token operator">*</span>z_r <span class="token operator">+</span> z_i<span class="token operator">*</span>z_i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> count<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		t_r <span class="token operator">=</span> z_r<span class="token operator">*</span>z_r <span class="token operator">-</span> z_i<span class="token operator">*</span>z_i <span class="token operator">+</span> c_r<span class="token punctuation">;</span>
		t_i <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>z_i<span class="token operator">*</span>z_r <span class="token operator">+</span> c_i<span class="token punctuation">;</span>
		z_r <span class="token operator">=</span> t_r<span class="token punctuation">;</span>
		z_i <span class="token operator">=</span> t_i<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">></span> <span class="token constant">ITER_CONST</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*
stores array of i16s at start of memory
corresponding to escape count at pixels in
array
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">let</span> memcounter <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">const</span> <span class="token literal-property property">step_X</span><span class="token operator">:</span>f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span><span class="token operator">/</span><span class="token function">f32</span><span class="token punctuation">(</span>canvas_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token literal-property property">step_Y</span><span class="token operator">:</span>f32 <span class="token operator">=</span> <span class="token constant">WINDOW</span><span class="token operator">/</span><span class="token function">f32</span><span class="token punctuation">(</span>canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token constant">START_Y_TOTAL</span><span class="token punctuation">,</span> count_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_y <span class="token operator">&lt;</span> canvas_height<span class="token punctuation">;</span> y <span class="token operator">+=</span> step_Y<span class="token punctuation">,</span> count_y<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token constant">START_X_TOTAL</span><span class="token punctuation">,</span> count_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> count_x <span class="token operator">&lt;</span> canvas_width<span class="token punctuation">;</span> x <span class="token operator">+=</span> step_X<span class="token punctuation">,</span> count_x<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
			store<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i16</span><span class="token punctuation">></span></span><span class="token plain-text">(memcounter, mandelbrot(x,y));
			memcounter += 2
		&#125;
	&#125;
&#125;</span></code>`,$i,Po,Co,Ki,Zi,Mo,Qi,ec,Do,ac,sc,Wo,bn,Jh,tc,yn,nc,At,oc,pc,Ps,lc,It,rc,ic,Rt,cc,uc,hc,Cs,dc,Pt,kc,mc,Ct,fc,wc,bc,Oo,yc,vc,vn,of=`<code class="language-jsx">@inline
<span class="token keyword">function</span> <span class="token function">mandelbrot_simd</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">c_rl</span><span class="token operator">:</span>v128<span class="token punctuation">,</span><span class="token literal-property property">c_il</span><span class="token operator">:</span>v128</span><span class="token punctuation">)</span><span class="token operator">:</span>v128<span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> <span class="token literal-property property">in_set</span> <span class="token operator">:</span> v128 <span class="token operator">=</span> <span class="token function">i32x4</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token literal-property property">z_r</span> <span class="token operator">:</span> v128 <span class="token operator">=</span> <span class="token function">f32x4</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token literal-property property">z_i</span> <span class="token operator">:</span> v128 <span class="token operator">=</span> <span class="token function">f32x4</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token literal-property property">t_r</span> <span class="token operator">:</span> v128 <span class="token operator">=</span> <span class="token function">f32x4</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token literal-property property">t_i</span> <span class="token operator">:</span> v128 <span class="token operator">=</span> <span class="token function">f32x4</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">,</span><span class="token number">0.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ones <span class="token operator">=</span> <span class="token function">i32x4</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> fours <span class="token operator">=</span> <span class="token function">f32x4</span><span class="token punctuation">(</span><span class="token number">4.</span><span class="token punctuation">,</span><span class="token number">4.</span><span class="token punctuation">,</span><span class="token number">4.</span><span class="token punctuation">,</span><span class="token number">4.</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token constant">ITER_CONSTS</span><span class="token operator">:</span>v128 <span class="token operator">=</span> v128<span class="token punctuation">.</span>splat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i32</span><span class="token punctuation">></span></span><span class="token plain-text">(ITER_CONST);
    let count:v128=i32x4(0,0,0,0)
    for(
        let total_count:i32 = 0, any_in_convergence_region:boolean = true;
        any_in_convergence_region &amp;&amp;
        total_count &lt; ITER_CONST;
        total_count++;
    ) </span><span class="token punctuation">&#123;</span>
        z_i <span class="token operator">=</span> v128<span class="token punctuation">.</span>add<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(c_il, v128.mul</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(v128.add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(z_r,z_r),z_i));
        z_r = v128.add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(c_rl, v128.sub</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(t_r,t_i));
        t_r = v128.mul</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(z_r,z_r);
        t_i = v128.mul</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(z_i,z_i);
        const mask = v128.le</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(v128.add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>f32</span><span class="token punctuation">></span></span><span class="token plain-text">(t_r,t_i),fours);
        any_in_convergence_region = v128.any_true(mask);
        count = v128.add</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i32</span><span class="token punctuation">></span></span><span class="token plain-text">(count, v128.and(ones,mask));
    &#125;
    return count;
&#125;</span></code>`,gc,Fo,_c,Ec,Lo,Tc,xc,Ms,Sc,jo,Ac,Ic,zo,Rc,Pc,Cc,Mt,Mc,Dt,Dc,Wc,Oc,gn,pf=`<code class="language-makefile">MEMORY_FLAGS <span class="token operator">=</span> --maximumMemory 80 --importMemory --noExportMemory --initialMemory 80 --memoryBase 4000000
OPTIMIZATION_FLAGS <span class="token operator">=</span> -O3 --converge
DEBUG_FLAGS <span class="token operator">=</span> --sourceMap
FEATURE_FLAGS <span class="token operator">=</span> --enable simd --enable threads
RUNTIME_FLAGS <span class="token operator">=</span> --runtime stub
<span class="token target symbol">start</span><span class="token punctuation">:</span> install
	npx asc assembly/mandel_final.ts -b build/mandel_final.wasm -t build/mandel_final.wat <span class="token variable">$</span><span class="token punctuation">(</span>OPTIMIZATION_FLAGS<span class="token punctuation">)</span> <span class="token variable">$</span><span class="token punctuation">(</span>MEMORY_FLAGS<span class="token punctuation">)</span> <span class="token variable">$</span><span class="token punctuation">(</span>FEATURE_FLAGS<span class="token punctuation">)</span> <span class="token variable">$</span><span class="token punctuation">(</span>RUNTIME_FLAGS<span class="token punctuation">)</span> <span class="token variable">$</span><span class="token punctuation">(</span>DEBUG_FLAGS<span class="token punctuation">)</span>

<span class="token target symbol">install</span><span class="token punctuation">:</span>
	npm i</code>`,Fc,Go,Lc,jc,Ds,zc,Wt,Gc,Nc,Ot,Hc,Bc,Yc,No,Uc,Jc,Ho,Bo,qc,qp,Xp,Vp,$p,Kp,_n,Xc,Zp,En,Vc,Qp,qs,Yo,Ws,Uo,$c,Kc,Jo,Zc,Qc,qo,eu,au,qe,Os,Xo,su,tu,Vo,nu,ou,$o,pu,lu,Fs,Ko,ru,iu,Zo,cu,uu,Qo,hu,du,Ls,ep,ku,mu,ap,fu,wu,sp,bu,yu,js,tp,vu,gu,np,_u,Eu,op,Tu,xu,zs,pp,Su,Au,lp,Iu,Ru,rp,Pu,Cu,Gs,ip,Mu,Du,cp,Wu,Ou,up,Fu,Lu,Ns,hp,ju,zu,dp,Gu,Nu,kp,Hu,Bu,Hs,mp,Yu,Uu,fp,Ju,qu,wp,Xu,el,Tn,bp,Vu,al,Xs,$u,yp,Ku,Zu,sl,xn,Qu,tl,Vs,eh,vp,ah,sh,nl,Ft,th,gp,nh,ol,Sn,_p,oh,pl,$s,ph,Lt,lh,rh,ll,rl,il,An,ih,cl,Ks,ch,Ep,uh,hh,ul,Zs,dh,Tp,kh,mh,hl,In,fh,dl,Rn,xp,wh,kl,ml,fl,Pn,bh,wl,jt,yh,zt,vh,bl,Gt,gh,Nt,_h,yl,Ht,Eh,Bt,Th,vl,Yt,xh,Ut,Sh,gl,Jt,Ah,qt,Ih,_l,Xt,Rh,Vt,Ph,El,Cn,Sp,Ch,Tl;return P=new $m({props:{math:Mf}}),_e=new $m({props:{math:Cf}}),{c(){g=t("div"),R=t("img"),x=i(),E=t("h2"),C=p("Introduction"),S=i(),ue=t("p"),Xe=p("Hey, welcome to the Feather Systems blog. This is the first post of many, documenting our journey towards creating simpler systems for better performance on the web. This post will document our initial experiments rendering the Mandelbrot set with JavaScript, Web-workers & emerging web technologies like webassembly. You can access the project "),D=t("a"),ea=p("here"),va=p(" and view the code "),te=t("a"),H=p("here"),Me=p(". These experiments were tested and measured by the team to properly document each technology\u2019s advantages & disadvantages."),aa=i(),O=t("p"),De=p("To elucidate, let\u2019s start with fractals & the mandelbrot set:"),B=i(),he=t("h2"),Ve=p("The Mandelbrot Set"),ge=i(),F=t("p"),sa=p("The Mandelbrot Set is defined as the set of complex numbers for which the function "),Ym(P.$$.fragment),ta=p(" does not diverge when "),Ym(_e.$$.fragment),Ee=p(". An image of how the Mandelbrot set looks as follows. Points shaded black are in the set. We are using the Mandelbrot set to benchmark our code."),J=i(),ne=t("div"),Q=t("img"),ha=i(),q=t("p"),de=p("The Mandelbrot Set is stunning. We highly recommend getting lost in its beauty using our rendering website ("),We=t("a"),$e=p("https://mandelbrot-ascript.vercel.app/"),X=p("). Click to zoom and Shift + Click to zoom out."),Oe=i(),Te=t("h2"),ee=p("Benchmark Structure"),ae=i(),ke=t("p"),V=t("a"),me=p("The benchmarking site"),Fe=p(" is designed to display each iteration we developed with a rough estimate for performance measured in milliseconds. For each version, a function was written to perform the Mandelbrot calculations and return a JavaScript ImageData object that could be easily put on the Canvas. Once the user selects a version from the drop down menu, the corresponding function is called. Since the functions can take some time to complete, they are called from a Web-worker to prevent the main thread from freezing while the function runs. The performance is calculated using "),fe=t("code"),Le=p("performance.now()"),pe=p(" calls before and after the function call that returns the ImageData object."),xe=i(),se=t("p"),da=p("Across all iterations, I used the following values:"),we=i(),M=t("pre"),ka=i(),Y=t("p"),$=t("strong"),be=p("FOR MULTITHREADED"),oa=i(),le=t("pre"),K=i(),U=t("p"),ma=p("We assume that the canvas width and height are integers. To determine if a point was in the Mandelbrot set, we iterated the Mandelbrot function on the point up to "),L=t("code"),je=p("ITER_CONST"),Se=p(", returning the number of times the function had iterated. We use the returned Mandelbrot value to set the color."),pa=i(),Z=t("p"),Ae=p("You may notice that RGB values get clamped at 255, making it seem like the exercise of iterating all the way to 1000 is just for the sake of testing performance, which it is. (Here is a whole list of "),Ie=t("a"),ze=p("smarter and better coloring algorithms"),re=p(" that we will not be using in this benchmarking exercise.)"),Ge=i(),ie=t("p"),k=p("As of when this article was published, the following versions are available on the Benchmarking Site:"),y=i(),W=t("ul"),Re=t("li"),Ne=p("Naive JS single threaded"),_a=i(),ye=t("li"),Ea=p("Rust WASM using bindgen (single threaded)"),Ta=i(),ce=t("li"),j=p("Assemblyscript old version (single threaded, not thread safe)"),Ca=i(),He=t("li"),la=p("Assemblyscript new version (single threaded, thread safe)"),Ma=i(),Be=t("li"),ra=p("Assemblyscript SIMD WASM (singlethreaded, multithreaded)"),Da=i(),Ye=t("li"),Ke=p("New JS(less memory allocation) singlethreaded"),Wa=i(),Ue=t("li"),ve=p("New JS SharedMemoryBuffer multithreaded"),Pe=i(),xa=t("br"),z=i(),Ze=t("br"),ia=i(),Je=t("h2"),fa=p("Implementing the Mandelbrot Set in JavaScript "),Sa=t("em"),Na=p("by Abhinuv Allu"),Oa=i(),_=t("details"),Ha=t("summary"),Ka=p("Click to Read"),wa=i(),Aa=t("p"),ss=p("I began the testing process with the web\u2019s best frenemy, Javascipt."),u=i(),f=t("p"),ca=p("I started with a naive approach to implement the Mandelbrot set in JavaScript and then try and optimize later. I started by creating a class for Complex numbers. This class would be able to add, multiply and return the magnitude. For the magnitude, I used a library function Math.hypot. Down below is our first initial implementation of the Complex class."),us=i(),Fa=t("pre"),hs=i(),Ba=t("p"),Ya=p("The program iterated through each element of the canvas to compute whether or not they were in the Mandelbrot set."),ds=i(),La=t("pre"),Ua=i(),Za=t("p"),os=p("These data points were added to an array which is then painted onto the Canvas. I had some ideas about optimizations with help from the profiler, however the most fascinating insight was that the Math.hypot function for two numbers is an order of magnitude slower than squaring, adding, and then computing the square root. During the profiling of the initial code I found out that Math.hypot was taking up most of the time."),Ja=i(),qa=t("div"),Ia=t("img"),ja=i(),ps=t("h3"),h=p("Improved JavaScript"),v=i(),Ra=t("p"),ws=p("To improve the initial naive approach, I decided to add multithreading. I started this with a naive way of having the worker compute each point and then send it back to receive the next point but, the message overhead was immense and resulted in a single threaded function as I only had one worker. The next step was experimenting with divisibility classes to add multiple workers. But this had the same problem where the overhead of sending & receiving a message from the workers was just too much. Eventually, I figured out that I would have each worker compute a set number of rows at a time."),bs=i(),Qa=t("pre"),vs=i(),za=t("pre"),gs=i(),Va=t("h3"),_s=p("Shared Buffer"),ls=i(),rs=t("p"),Es=p("Since all the points would be added to the same array it would make sense that having a shared buffer to reduce the overhead needed to send array points would decrease the compute time. So I added a shared buffer that was formatted like an ImageData object so it would be easier to paint it onto the canvas. This required some rewriting of the some steps here and there, but it ended up being faster."),Ts=i(),is=t("p"),xs=p("The other issue with using a Shared Buffer is that I had to add promises to the code, so werefactored it to include promises."),$t=i(),Ss=t("pre"),Zt=i(),As=t("pre"),Qt=i(),ms=t("p"),en=p("These changes made the code perform a lot better. You can check out it\u2019s performance in the \u201D"),Is=t("a"),Bs=p("Results"),an=p("\u201D section. JavaScript was extremely performant (especially on Chrome) and gave us hope that pushing the boundaries of speed on the web was possible."),$a=i(),at=t("br"),st=i(),tt=t("br"),nt=i(),Qe=t("h2"),sn=p("So, What is Webassembly? "),Ys=t("em"),tn=p("by Abhishek Cherath"),ot=i(),G=t("details"),Us=t("summary"),nn=p("Click to Read"),on=i(),es=t("p"),pn=p(`In our quest to further optimize performance, we used webassembly, an emerging web technology optimized for what we are trying to achieve. So, what is it?
Insofar as an overview is concerned, nothing beats Lin Clark\u2019s cartoon intro `),fs=t("a"),ln=p("here"),ql=p(", and the MDN docs "),pt=t("a"),Xl=p("here"),Vl=p(". Put simply, webassembly is a low level typed language that targets the browser\u2019s VM. For some reasons[1] , it\u2019s very quick and easy to compile into decently fast machine code."),$l=i(),Vn=t("p"),Kl=p("Fundamentally, the language was designed to offer the best possible latency (time to execution) and speed of execution. Low latency is achieved by having a small binary representation (vs javascript\u2019s textual representation) and having type definitions and a function table at the start of a .wasm module, which allows compilers to compile in a streaming fashion, instead of needing to have access to the entire file before starting."),Zl=i(),lt=t("p"),Ql=p("Speed of execution requires slow compilation with multiple passes for the compiler to accurately assess the best register allocation, optimize out unnecessary instructions and do whatever other things compilers do. ("),$n=t("em"),er=p("note: I have frankly no idea what goes into compiler optimization, I just know it takes time"),ar=p(")"),sr=i(),rt=t("p"),tr=p("To satisfy both these goals, browsers (atleast Firefox and Chrome) have two compilers for webassembly, the first compiles the module as it\u2019s called from the network, and is basically instant ("),it=t("a"),nr=p("here"),or=p(", chrome devs claim that theirs can do on the order of 10+ mb of code per second, so the bottleneck will almost always be the speed of the network rather than the compiler.) The second does optimization and dynamically replaces the unoptimized bytecode from the first when it\u2019s done."),pr=i(),ct=t("p"),lr=p("It\u2019s interesting to note here that, "),Kn=t("em"),rr=p("a priori"),ir=p(" there\u2019s no reason to expect that webassembly code for high performance stuff [2] (like fractal calculation) will be any faster than its javascript counterpart. Since the hot loop (calculating escape time) is running many thousands of times, one would expect the javascript JIT compiler to infer the output types and get basically similar bytecode, while amortizing its greater overhead considering workload size."),cr=i(),Zn=t("p"),ur=p("In a later article, I will be examining this conjecture, and taking a deeper look at the flamegraphs and bytecode generated by our benchmarks."),hr=i(),Qn=t("p"),dr=p("The other interesting thing about webassembly is its memory model, programs do not have access to their own instructions and stack machine memory (so no self modifying code, and no messing with values on the stack). What they do have access to is a block of linear memory, which is backed by a javascript ArrayBuffer, and byte addressed (ie. memory[0] is 1 byte long.)"),kr=i(),eo=t("p"),ao=t("em"),mr=p("[1]I\u2019m not entirely sure why, but it\u2019s some combination of coding for a simple stack machine, having type information, linear memory, and being easy to parse."),fr=i(),ut=t("p"),ht=t("em"),wr=p("[2]This is "),so=t("strong"),br=p("mostly"),yr=p(" true, except for vectorization. SIMD (Single Instruction Multiple Data) instructions are featured in the webassembly spec and implemented by chrome and firefox, which do not expose them in js, and have no plans to do so. (although"),vr=p(" I "),to=t("em"),gr=p("suppose there\u2019s nothing stopping a JIT from autovectorizing, is there?)"),Mp=i(),Dp=t("br"),Wp=t("br"),Op=i(),rn=t("blockquote"),cn=t("p"),no=t("strong"),_r=p("Our Approach to webassembly"),Er=p(": As many languages can be compiled to webassembly, we looked at two of the most commonly used ones: Rust & AssemblyScript. In the following sections we will describe our approach to these two languages."),Fp=i(),Lp=t("br"),jp=t("br"),zp=i(),dt=t("h2"),Tr=p("Rust Implementation "),oo=t("em"),xr=p("by Jo Gao"),Gp=i(),T=t("details"),po=t("summary"),Sr=p("Click to Read"),Ar=i(),lo=t("h3"),Ir=p("Singlethreaded"),Rr=i(),kt=t("p"),Pr=p("I wrote a similar implementation of the function in Rust that would return an ImageData object of the Mandelbrot Set. It uses "),mt=t("a"),Cr=p("wasm-bindgen"),Mr=p(", a Rust library that will compile Rust code to webassembly, and then generate the bindings and glue between JavaScript and webassembly so that it can be run on the web. It handles all the type conversions between JavaScript and webassembly and facilitates the compilation of Rust to webassembly."),Dr=i(),cs=t("p"),Wr=p("In the iterative "),ro=t("code"),Or=p("in_mandelbrot"),Fr=p(" function, "),io=t("code"),Lr=p("count"),jr=p(" is set to iterate all the way to 1000 for benchmarking purposes. When returning, "),co=t("code"),zr=p("count"),Gr=p(" is set to 255 if larger than 255 to prevent having to cast numbers larger than 255 to u8."),Nr=i(),un=t("pre"),Hr=i(),uo=t("p"),Br=p("The magic of wasm-bindgen kicks in here, allowing us to create the ImageData object right in the Rust code by providing the type and the constructor signature:"),Yr=i(),hn=t("pre"),Ur=i(),Rs=t("p"),Jr=p("After compiling this code, wasm-bindgen outputs a number of files that are meant to be bundled using "),ft=t("a"),qr=p("Webpack"),Xr=p(" and imported to your JavaScript file as an ES6 module, allowing access to the functions that were written in Rust. The idea is that after compiling and importing the module, calling "),ho=t("code"),Vr=p("run(...)"),$r=p("would return a whole JavaScript ImageData Object."),Kr=i(),ko=t("p"),Zr=p("Unfortunately, our Benchmarking Site is structured to use a web worker to call this function. Modules cannot be imported to web workers. However, they can be imported to module workers, web workers that support module import, but as of today, Firefox does not support this feature."),Qr=i(),wt=t("p"),ei=p("This is an infeasible solution because I was unwilling to limit the availability of our benchmark site for this implementation. After many hours of tinkering with the existing setup, I found a workaround that eliminated the need for Webpack altogether: after compiling with wasm-bindgen, I copy and pasted the entire outputted .js file with the import and exports removed, appended the wrapper function I had written to it, and called "),mo=t("code"),ai=p("init(...)"),si=p(" on the outputted .wasm."),ti=i(),fo=t("p"),ni=p("After confirming that this worked, A colleague and I wrote a shell script to automatically do this after compilation. Albeit a little unpleasant on the eyes, it does the job:"),oi=i(),dn=t("pre"),pi=i(),wo=t("h3"),li=p("Rust & Webassembly Multi-Threaded"),ri=i(),bo=t("p"),ii=p("To further improve performance in Rust, I carried out the same calculations, but in parallel this time. An advantage of the Mandelbrot Set is that determining whether a pixel falls within the set or not can be done completely independently of other pixels. The outcome of each pixel has no effect on the others, making the transition to multithreading straightforward."),ci=i(),bt=t("p"),ui=p("I used the "),yt=t("a"),hi=p("Parallel Raytracing example"),di=p(". given in the Wasm-Bindgen repo, as a starting point. Using a combination of web workers and the Rayon Crate for data parallelism in Rust yielded a pretty fast multithreaded Mandelbrot Set."),ki=i(),Js=t("p"),yo=t("em"),mi=p("Unfortunately,"),fi=p(" I "),vo=t("em"),wi=p("was unable to include this version of the Mandelbrot in the final Benchmarking website"),bi=p(" because I ran into a similar problem with the wasm-bindgen and module output. This time, it was further complicated by the Webworkers being created from within the Rust code. The funky workaround that had allowed for the singlethreaded RustWasm example to run on the Benchmarking Site failed to work the same magic for this implementation."),yi=i(),go=t("p"),vi=p("This version of the Mandelbrot also makes use of the SharedArrayBuffer, and had it been on the site, would not work in Safari and browsers that do not support SharedArrayBuffer Objects."),Np=i(),Hp=t("br"),Bp=i(),Yp=t("br"),Up=i(),vt=t("h2"),gi=p("AssemblyScript "),_o=t("em"),_i=p("by Abhishek Cherath"),Jp=i(),w=t("details"),Eo=t("summary"),Ei=p("Click to Read"),Ti=i(),To=t("p"),xi=p("AssemblyScript compiles a subset of typescript to webassembly. To get an idea of how simple it is to write it, here\u2019s essentially the same javascript code from earlier, with type annotations and minor changes for webassembly:"),Si=i(),kn=t("pre"),Ai=i(),gt=t("p"),Ii=p("The only really noteworthy change was to not have "),xo=t("code"),Ri=p("new"),Pi=p(" in the hot loop. The Assemblyscript garbage collector had some trouble with it and total allocation would exceed webassembly\u2019s 100 page memory limit[1]. I suspect that sort of code will be usable once the webassembly GC proposals, which allow wasm modules to hook into the browser\u2019s GC, are implemented."),Ci=i(),So=t("h3"),Mi=p("Threading"),Di=i(),_t=t("p"),Wi=p("The fastest way to thread code in browsers is to use "),Et=t("a"),Oi=p("SharedArrayBuffer"),Fi=p(", this also requires the following CORS headers."),Li=i(),mn=t("pre"),ji=i(),Ao=t("p"),zi=p("This is to ensure cross-origin isolation, which protects against memory being exfiltrated somehow (I might explore this in the future, but that\u2019s about all I know for the moment.) webassembly memories can also be created with a backing SharedArrayBuffer, which allows fast multithreading, as separate web-workers can run the same webassembly module and write their results to the same memory, meaning that large objects don\u2019t need to be passed around using postmessage, and the many O(N) overheads to do with copying and creating new arrays can be avoided."),Gi=i(),Tt=t("p"),Ni=p("However, while Assemblyscript "),xt=t("a"),Hi=p("allows"),Bi=p(" access to atomic instructions, it does not implement any sort of locking. So any program that reads and writes to memory will need to be adjusted to thread with shared memory. This means that the program seen above, with its Complex class and set calls reading and wrxiting to the linear memory quite often, is very prone to\u2026 interesting behaviour when threaded."),Yi=i(),fn=t("div"),St=t("img"),Ui=i(),Io=t("p"),Ji=p("Exhibit A of nondeterministic behavior"),qi=i(),Ro=t("p"),Xi=p("That being said, for small examples such as fractal calculation, it\u2019s quite easy to limit mutability to local variables (which are on the stack, not in the linear memory, and so are not shared) and avoid the problem entirely. Like in the following code:"),Vi=i(),wn=t("pre"),$i=i(),Po=t("p"),Co=t("em"),Ki=p("note that the store instruction there might look like it would cause issues, but as long as threads work on different parts of the image, that should not be a problem."),Zi=i(),Mo=t("h3"),Qi=p("SIMD"),ec=i(),Do=t("p"),ac=p("SIMD (Single Instruction Multiple Data) instructions are special instructions on the CPU that allow multiple additions, multiplications etc to be carried out in parallel on the same core)"),sc=i(),Wo=t("p"),bn=t("img"),tc=i(),yn=t("p"),nc=p("By Vadikus - Own work, CC BY-SA 4.0, "),At=t("a"),oc=p("https://commons.wikimedia.org/w/index.php?curid=39715273"),pc=i(),Ps=t("p"),lc=p("They\u2019re not in the webassembly spec as yet, but should be "),It=t("a"),rc=p("soon"),ic=p(", and are currently available on chrome and firefox (although not on ARM in firefox 89, ie. apple M1.) Assemblyscript does not autovectorize code, but "),Rt=t("a"),cc=p("allows"),uc=p(" access to the instructions, and provides some sugar for different types and functions to initialise constant vectors."),hc=i(),Cs=t("p"),dc=p("The vector size in the proposal is 128 bit, which is a decent compromise and is backed by hardware instructions on most modern computers. In the future, "),Pt=t("a"),kc=p("flexible vectors"),mc=p(", should be able to allow access to 256, 512 bit vectors that modern intel and AMD CPUs support (consumer ARM chips currently only have 128 bit vectors, as far as I\u2019m aware, although "),Ct=t("a"),fc=p("supercomputer ARM chips do have 512 bit vectors"),wc=p(".)"),bc=i(),Oo=t("p"),yc=p("Vectorizing the mandelbrot code above is not too bad, althought it does look rather messy:"),vc=i(),vn=t("pre"),gc=i(),Fo=t("p"),_c=p("This should basically be a 4x speedup over the previous code, when run single threaded. Multithreaded, that number will vary depending on how threads are allocated, as work only gets completed as fast as the slowest thread."),Ec=i(),Lo=t("h3"),Tc=p("Compiler Flags"),xc=i(),Ms=t("p"),Sc=p("For the examples above, some memory is reserved for the purposes of storing the image, in assemblyscript this is achieved by passing the "),jo=t("code"),Ac=p("--memoryBase"),Ic=p(" flag to the "),zo=t("code"),Rc=p("asc"),Pc=p(" compiler (as seen in the makefile below)"),Cc=i(),Mt=t("p"),Mc=p("The other flags are tuned for maximum performance (thanks to "),Dt=t("a"),Dc=p("Max Graey"),Wc=p(" for -O3 instead of -O3s/z) and to enable necessary features (threads, SIMD.)"),Oc=i(),gn=t("pre"),Fc=i(),Go=t("h3"),Lc=p("Multithreaded SIMD Speed"),jc=i(),Ds=t("p"),zc=p("Benchmark results will be discussed near the end of this article, but the speed of the multithreaded SIMD code is quite astonishing, roughly 3x the speed of multithreaded JS using sharedarraybuffers, and I\u2019m guessing that\u2019s held back by module message passing overheads. "),Wt=t("a"),Gc=p("HERE"),Nc=p(" is a basic mandelbrot zoom implementation using it (only works in firefox(\u226590 on apple m1) and chrome, "),Ot=t("a"),Hc=p("here\u2019s"),Bc=p(" the github repo.) I\u2019ll be working in boundary estimation and period checking along with xaos zoom algorithm into it in a couple of months, so stay tuned for that!"),Yc=i(),No=t("p"),Uc=p("I\u2019m also fairly certain that this is the first(?) SIMD mandelbrot implementation for webassembly, so if anyone wants to use it for anything (under the terms of the GPLv3 License) feel free!"),Jc=i(),Ho=t("p"),Bo=t("em"),qc=p("[1] A page being 64KiB (65,536 bytes), so about 6.5 mb max memory"),qp=i(),Xp=t("br"),Vp=i(),$p=t("br"),Kp=i(),_n=t("h2"),Xc=p("Results"),Zp=i(),En=t("p"),Vc=p("First, we know that our benchmarks here are not rigorous in the slightest. Their purpose was to give us an idea of the rough performance capabilities of the tools we\u2019re working with, to help inform our choices as we port certain programs (stay tuned!) to webassembly. We will be refining this tool in the future, and hope to have (somehow) bytecode outputs and flamegraphs on the site."),Qp=i(),qs=t("table"),Yo=t("thead"),Ws=t("tr"),Uo=t("th"),$c=p("Benchmark"),Kc=i(),Jo=t("th"),Zc=p("Firefox 89(ms)"),Qc=i(),qo=t("th"),eu=p("Chrome 91 (ms)"),au=i(),qe=t("tbody"),Os=t("tr"),Xo=t("td"),su=p("Naive-js"),tu=i(),Vo=t("td"),nu=p("2992"),ou=i(),$o=t("td"),pu=p("631"),lu=i(),Fs=t("tr"),Ko=t("td"),ru=p("Improved-js"),iu=i(),Zo=t("td"),cu=p("1755"),uu=i(),Qo=t("td"),hu=p("292"),du=i(),Ls=t("tr"),ep=t("td"),ku=p("Multithreaded-js"),mu=i(),ap=t("td"),fu=p("705"),wu=i(),sp=t("td"),bu=p("129"),yu=i(),js=t("tr"),tp=t("td"),vu=p("Singlethreaded-Rust * **"),gu=i(),np=t("td"),_u=p("296"),Eu=i(),op=t("td"),Tu=p("300"),xu=i(),zs=t("tr"),pp=t("td"),Su=p("Simple Assemblyscript"),Au=i(),lp=t("td"),Iu=p("494"),Ru=i(),rp=t("td"),Pu=p("497"),Cu=i(),Gs=t("tr"),ip=t("td"),Mu=p("Optimized non-SIMD AssemblyScript"),Du=i(),cp=t("td"),Wu=p("250"),Ou=i(),up=t("td"),Fu=p("262"),Lu=i(),Ns=t("tr"),hp=t("td"),ju=p("Optimized SIMD AssemblyScript"),zu=i(),dp=t("td"),Gu=p("124"),Nu=i(),kp=t("td"),Hu=p("108"),Bu=i(),Hs=t("tr"),mp=t("td"),Yu=p("SIMD Multithreaded AssemblyScript"),Uu=i(),fp=t("td"),Ju=p("43"),qu=i(),wp=t("td"),Xu=p("43"),el=i(),Tn=t("p"),bp=t("em"),Vu=p("All numbers approximate, gathered from fresh browser session after reboot on an HP Envy 13 with an i5-8265U CPU @ 1.60GHz and 8gb of RAM running Ubuntu 20.04.2 with kernel 5.8.0. Average of 5 runs (first 2 runs dropped)"),al=i(),Xs=t("p"),$u=p("The results of our benchmark (at least approximately) line up with what one would expect, but we find a few items of interest. First, as far as the javascript implementations are concerned, Firefox is "),yp=t("em"),Ku=p("significantly"),Zu=p(" slower than chrome. Second, webassembly speeds are comparable for both browsers."),sl=i(),xn=t("p"),Qu=p("The performance advantage of webassembly (without SIMD) over javascript for this benchmark is basically negligible for chrome. In a future article it\u2019ll be interesting to see whether the bytecode generated is also similar."),tl=i(),Vs=t("p"),eh=p("But the key insight here is clear, webassembly offers "),vp=t("em"),ah=p("predictable"),sh=p(" performance, across browser engines. We\u2019ll be adding fallbacks for safari later to see if this holds there as well. Further, we\u2019ll compare the results to native code."),nl=i(),Ft=t("p"),th=p("*"),gp=t("em"),nh=p("The rust code can likely be sped up with some optimizations here and there, but for a rough effort from a novice rust programmer, this is representative."),ol=i(),Sn=t("p"),_p=t("em"),oh=p("** The rust code was improved by @MaxGraey and now lines up with what one would expect"),pl=i(),$s=t("p"),ph=p("See the demo "),Lt=t("a"),lh=p("here"),rh=p("."),ll=i(),rl=t("br"),il=i(),An=t("h2"),ih=p("Final Thoughts"),cl=i(),Ks=t("p"),ch=p("As tools of application distribution, browsers have some undeniable advantages over the traditional pipeline of download \u2192 extract onto disk \u2192 load from disk for execution. For most programs, it is technically unnecessary to have "),Ep=t("em"),uh=p("all"),hh=p(" of their assets present to be able to enjoy some subset of their capabilities. Of course, adding such partial update capabilities is non-trivial, and would add significant complexity. But web developers and browser vendors have made a lot of progress in enabling this essentially by default, and with webassembly, enabling it in areas where it\u2019s not previously been feasible."),ul=i(),Zs=t("p"),dh=p("Further, cloud offloading enables users to easily sustain state across devices and in some cases avoid calculation heavy code in the interests of battery life or smooth performance. The easiest way to realize these advantages is to distribute one\u2019s application in an environment that does this "),Tp=t("em"),kh=p("by default"),mh=p(": the browser. But a prerequisite for this is that the experience is not overly hampered by being in the browser, and bringing webassembly to near native performance is a key part of that."),hl=i(),In=t("p"),fh=p("There is an opportunity here to allow people to access performance heavy applications like games and simulations on their devices without having to get into the nasty business of managing local state, which accounts for what, 99% of problems installing and using software? We want to help build this, and over the next few weeks, will be releasing demos to show what it might look like, so stay tuned!"),dl=i(),Rn=t("p"),xp=t("em"),wh=p("Of course, the possible bad end here is that the canvas ends up as an inefficient GUI toolkit to have fungible programmers at the cost of user experience, we hope that doesn\u2019t happen."),kl=i(),ml=t("br"),fl=i(),Pn=t("h2"),bh=p("Further Reading:"),wl=i(),jt=t("p"),yh=p("David Beazley. (2019). A Talk Near the Future of Python (a.k.a., Dave live-codes a Webassembly Interpreter). "),zt=t("a"),vh=p("https://www.youtube.com/watch?v=r-A78RgMhZU"),bl=i(),Gt=t("p"),gh=p("Firefox\u2019s low-latency webassembly compiler \u2013 wingolog. (n.d.). Retrieved June 19, 2021, from "),Nt=t("a"),_h=p("https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),yl=i(),Ht=t("p"),Eh=p("firefox\u2019s low-latency webassembly compiler\u2014Wingolog. (n.d.). Retrieved June 19, 2021, from "),Bt=t("a"),Th=p("https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),vl=i(),Yt=t("p"),xh=p("Pereira, F. M. Q., & Palsberg, J. (2006). Register Allocation After Classical SSA Elimination is NP-Complete. In L. Aceto & A. Ing\xF3lfsd\xF3ttir (Eds.), Foundations of Software Science and Computation Structures (Vol. 3921, pp. 79\u201393). Springer Berlin Heidelberg. "),Ut=t("a"),Sh=p("https://doi.org/10.1007/11690634_6"),gl=i(),Jt=t("p"),Ah=p("WebAssembly. (n.d.). Retrieved June 19, 2021, from "),qt=t("a"),Ih=p("https://webassembly.org/"),_l=i(),Xt=t("p"),Rh=p("WebAssembly compilation pipeline \xB7 V8. (n.d.). Retrieved June 19, 2021, from "),Vt=t("a"),Ph=p("https://v8.dev/docs/wasm-compilation-pipeline"),El=i(),Cn=t("p"),Sp=t("em"),Ch=p(Zm),this.h()},l(s){g=n(s,"DIV",{align:!0});var m=o(g);R=n(m,"IMG",{style:!0,src:!0,alt:!0}),m.forEach(a),x=c(s),E=n(s,"H2",{});var qh=o(E);C=l(qh,"Introduction"),qh.forEach(a),S=c(s),ue=n(s,"P",{});var Mn=o(ue);Xe=l(Mn,"Hey, welcome to the Feather Systems blog. This is the first post of many, documenting our journey towards creating simpler systems for better performance on the web. This post will document our initial experiments rendering the Mandelbrot set with JavaScript, Web-workers & emerging web technologies like webassembly. You can access the project "),D=n(Mn,"A",{href:!0,rel:!0});var Xh=o(D);ea=l(Xh,"here"),Xh.forEach(a),va=l(Mn," and view the code "),te=n(Mn,"A",{href:!0,rel:!0});var Vh=o(te);H=l(Vh,"here"),Vh.forEach(a),Me=l(Mn,". These experiments were tested and measured by the team to properly document each technology\u2019s advantages & disadvantages."),Mn.forEach(a),aa=c(s),O=n(s,"P",{});var $h=o(O);De=l($h,"To elucidate, let\u2019s start with fractals & the mandelbrot set:"),$h.forEach(a),B=c(s),he=n(s,"H2",{});var Kh=o(he);Ve=l(Kh,"The Mandelbrot Set"),Kh.forEach(a),ge=c(s),F=n(s,"P",{});var Dn=o(F);sa=l(Dn,"The Mandelbrot Set is defined as the set of complex numbers for which the function "),Um(P.$$.fragment,Dn),ta=l(Dn," does not diverge when "),Um(_e.$$.fragment,Dn),Ee=l(Dn,". An image of how the Mandelbrot set looks as follows. Points shaded black are in the set. We are using the Mandelbrot set to benchmark our code."),Dn.forEach(a),J=c(s),ne=n(s,"DIV",{align:!0});var Zh=o(ne);Q=n(Zh,"IMG",{style:!0,src:!0,alt:!0}),Zh.forEach(a),ha=c(s),q=n(s,"P",{});var xl=o(q);de=l(xl,"The Mandelbrot Set is stunning. We highly recommend getting lost in its beauty using our rendering website ("),We=n(xl,"A",{href:!0,rel:!0});var Qh=o(We);$e=l(Qh,"https://mandelbrot-ascript.vercel.app/"),Qh.forEach(a),X=l(xl,"). Click to zoom and Shift + Click to zoom out."),xl.forEach(a),Oe=c(s),Te=n(s,"H2",{});var ed=o(Te);ee=l(ed,"Benchmark Structure"),ed.forEach(a),ae=c(s),ke=n(s,"P",{});var Ap=o(ke);V=n(Ap,"A",{href:!0,rel:!0});var ad=o(V);me=l(ad,"The benchmarking site"),ad.forEach(a),Fe=l(Ap," is designed to display each iteration we developed with a rough estimate for performance measured in milliseconds. For each version, a function was written to perform the Mandelbrot calculations and return a JavaScript ImageData object that could be easily put on the Canvas. Once the user selects a version from the drop down menu, the corresponding function is called. Since the functions can take some time to complete, they are called from a Web-worker to prevent the main thread from freezing while the function runs. The performance is calculated using "),fe=n(Ap,"CODE",{});var sd=o(fe);Le=l(sd,"performance.now()"),sd.forEach(a),pe=l(Ap," calls before and after the function call that returns the ImageData object."),Ap.forEach(a),xe=c(s),se=n(s,"P",{});var td=o(se);da=l(td,"Across all iterations, I used the following values:"),td.forEach(a),we=c(s),M=n(s,"PRE",{class:!0});var lf=o(M);lf.forEach(a),ka=c(s),Y=n(s,"P",{});var nd=o(Y);$=n(nd,"STRONG",{});var od=o($);be=l(od,"FOR MULTITHREADED"),od.forEach(a),nd.forEach(a),oa=c(s),le=n(s,"PRE",{class:!0});var rf=o(le);rf.forEach(a),K=c(s),U=n(s,"P",{});var Sl=o(U);ma=l(Sl,"We assume that the canvas width and height are integers. To determine if a point was in the Mandelbrot set, we iterated the Mandelbrot function on the point up to "),L=n(Sl,"CODE",{});var pd=o(L);je=l(pd,"ITER_CONST"),pd.forEach(a),Se=l(Sl,", returning the number of times the function had iterated. We use the returned Mandelbrot value to set the color."),Sl.forEach(a),pa=c(s),Z=n(s,"P",{});var Al=o(Z);Ae=l(Al,"You may notice that RGB values get clamped at 255, making it seem like the exercise of iterating all the way to 1000 is just for the sake of testing performance, which it is. (Here is a whole list of "),Ie=n(Al,"A",{href:!0,rel:!0});var ld=o(Ie);ze=l(ld,"smarter and better coloring algorithms"),ld.forEach(a),re=l(Al," that we will not be using in this benchmarking exercise.)"),Al.forEach(a),Ge=c(s),ie=n(s,"P",{});var rd=o(ie);k=l(rd,"As of when this article was published, the following versions are available on the Benchmarking Site:"),rd.forEach(a),y=c(s),W=n(s,"UL",{});var Ga=o(W);Re=n(Ga,"LI",{});var id=o(Re);Ne=l(id,"Naive JS single threaded"),id.forEach(a),_a=c(Ga),ye=n(Ga,"LI",{});var cd=o(ye);Ea=l(cd,"Rust WASM using bindgen (single threaded)"),cd.forEach(a),Ta=c(Ga),ce=n(Ga,"LI",{});var ud=o(ce);j=l(ud,"Assemblyscript old version (single threaded, not thread safe)"),ud.forEach(a),Ca=c(Ga),He=n(Ga,"LI",{});var hd=o(He);la=l(hd,"Assemblyscript new version (single threaded, thread safe)"),hd.forEach(a),Ma=c(Ga),Be=n(Ga,"LI",{});var dd=o(Be);ra=l(dd,"Assemblyscript SIMD WASM (singlethreaded, multithreaded)"),dd.forEach(a),Da=c(Ga),Ye=n(Ga,"LI",{});var kd=o(Ye);Ke=l(kd,"New JS(less memory allocation) singlethreaded"),kd.forEach(a),Wa=c(Ga),Ue=n(Ga,"LI",{});var md=o(Ue);ve=l(md,"New JS SharedMemoryBuffer multithreaded"),md.forEach(a),Ga.forEach(a),Pe=c(s),xa=n(s,"BR",{}),z=c(s),Ze=n(s,"BR",{}),ia=c(s),Je=n(s,"H2",{});var Mh=o(Je);fa=l(Mh,"Implementing the Mandelbrot Set in JavaScript "),Sa=n(Mh,"EM",{});var fd=o(Sa);Na=l(fd,"by Abhinuv Allu"),fd.forEach(a),Mh.forEach(a),Oa=c(s),_=n(s,"DETAILS",{});var A=o(_);Ha=n(A,"SUMMARY",{});var wd=o(Ha);Ka=l(wd,"Click to Read"),wd.forEach(a),wa=c(A),Aa=n(A,"P",{});var bd=o(Aa);ss=l(bd,"I began the testing process with the web\u2019s best frenemy, Javascipt."),bd.forEach(a),u=c(A),f=n(A,"P",{});var yd=o(f);ca=l(yd,"I started with a naive approach to implement the Mandelbrot set in JavaScript and then try and optimize later. I started by creating a class for Complex numbers. This class would be able to add, multiply and return the magnitude. For the magnitude, I used a library function Math.hypot. Down below is our first initial implementation of the Complex class."),yd.forEach(a),us=c(A),Fa=n(A,"PRE",{class:!0});var cf=o(Fa);cf.forEach(a),hs=c(A),Ba=n(A,"P",{});var vd=o(Ba);Ya=l(vd,"The program iterated through each element of the canvas to compute whether or not they were in the Mandelbrot set."),vd.forEach(a),ds=c(A),La=n(A,"PRE",{class:!0});var uf=o(La);uf.forEach(a),Ua=c(A),Za=n(A,"P",{});var gd=o(Za);os=l(gd,"These data points were added to an array which is then painted onto the Canvas. I had some ideas about optimizations with help from the profiler, however the most fascinating insight was that the Math.hypot function for two numbers is an order of magnitude slower than squaring, adding, and then computing the square root. During the profiling of the initial code I found out that Math.hypot was taking up most of the time."),gd.forEach(a),Ja=c(A),qa=n(A,"DIV",{align:!0});var _d=o(qa);Ia=n(_d,"IMG",{style:!0,src:!0,alt:!0}),_d.forEach(a),ja=c(A),ps=n(A,"H3",{});var Ed=o(ps);h=l(Ed,"Improved JavaScript"),Ed.forEach(a),v=c(A),Ra=n(A,"P",{});var Td=o(Ra);ws=l(Td,"To improve the initial naive approach, I decided to add multithreading. I started this with a naive way of having the worker compute each point and then send it back to receive the next point but, the message overhead was immense and resulted in a single threaded function as I only had one worker. The next step was experimenting with divisibility classes to add multiple workers. But this had the same problem where the overhead of sending & receiving a message from the workers was just too much. Eventually, I figured out that I would have each worker compute a set number of rows at a time."),Td.forEach(a),bs=c(A),Qa=n(A,"PRE",{class:!0});var hf=o(Qa);hf.forEach(a),vs=c(A),za=n(A,"PRE",{class:!0});var df=o(za);df.forEach(a),gs=c(A),Va=n(A,"H3",{});var xd=o(Va);_s=l(xd,"Shared Buffer"),xd.forEach(a),ls=c(A),rs=n(A,"P",{});var Sd=o(rs);Es=l(Sd,"Since all the points would be added to the same array it would make sense that having a shared buffer to reduce the overhead needed to send array points would decrease the compute time. So I added a shared buffer that was formatted like an ImageData object so it would be easier to paint it onto the canvas. This required some rewriting of the some steps here and there, but it ended up being faster."),Sd.forEach(a),Ts=c(A),is=n(A,"P",{});var Ad=o(is);xs=l(Ad,"The other issue with using a Shared Buffer is that I had to add promises to the code, so werefactored it to include promises."),Ad.forEach(a),$t=c(A),Ss=n(A,"PRE",{class:!0});var kf=o(Ss);kf.forEach(a),Zt=c(A),As=n(A,"PRE",{class:!0});var mf=o(As);mf.forEach(a),Qt=c(A),ms=n(A,"P",{});var Il=o(ms);en=l(Il,"These changes made the code perform a lot better. You can check out it\u2019s performance in the \u201D"),Is=n(Il,"A",{href:!0,rel:!0});var Id=o(Is);Bs=l(Id,"Results"),Id.forEach(a),an=l(Il,"\u201D section. JavaScript was extremely performant (especially on Chrome) and gave us hope that pushing the boundaries of speed on the web was possible."),Il.forEach(a),A.forEach(a),$a=c(s),at=n(s,"BR",{}),st=c(s),tt=n(s,"BR",{}),nt=c(s),Qe=n(s,"H2",{});var Dh=o(Qe);sn=l(Dh,"So, What is Webassembly? "),Ys=n(Dh,"EM",{});var Rd=o(Ys);tn=l(Rd,"by Abhishek Cherath"),Rd.forEach(a),Dh.forEach(a),ot=c(s),G=n(s,"DETAILS",{});var Ce=o(G);Us=n(Ce,"SUMMARY",{});var Pd=o(Us);nn=l(Pd,"Click to Read"),Pd.forEach(a),on=c(Ce),es=n(Ce,"P",{});var Wn=o(es);pn=l(Wn,`In our quest to further optimize performance, we used webassembly, an emerging web technology optimized for what we are trying to achieve. So, what is it?
Insofar as an overview is concerned, nothing beats Lin Clark\u2019s cartoon intro `),fs=n(Wn,"A",{href:!0,rel:!0});var Cd=o(fs);ln=l(Cd,"here"),Cd.forEach(a),ql=l(Wn,", and the MDN docs "),pt=n(Wn,"A",{href:!0,rel:!0});var Md=o(pt);Xl=l(Md,"here"),Md.forEach(a),Vl=l(Wn,". Put simply, webassembly is a low level typed language that targets the browser\u2019s VM. For some reasons[1] , it\u2019s very quick and easy to compile into decently fast machine code."),Wn.forEach(a),$l=c(Ce),Vn=n(Ce,"P",{});var Dd=o(Vn);Kl=l(Dd,"Fundamentally, the language was designed to offer the best possible latency (time to execution) and speed of execution. Low latency is achieved by having a small binary representation (vs javascript\u2019s textual representation) and having type definitions and a function table at the start of a .wasm module, which allows compilers to compile in a streaming fashion, instead of needing to have access to the entire file before starting."),Dd.forEach(a),Zl=c(Ce),lt=n(Ce,"P",{});var Rl=o(lt);Ql=l(Rl,"Speed of execution requires slow compilation with multiple passes for the compiler to accurately assess the best register allocation, optimize out unnecessary instructions and do whatever other things compilers do. ("),$n=n(Rl,"EM",{});var Wd=o($n);er=l(Wd,"note: I have frankly no idea what goes into compiler optimization, I just know it takes time"),Wd.forEach(a),ar=l(Rl,")"),Rl.forEach(a),sr=c(Ce),rt=n(Ce,"P",{});var Pl=o(rt);tr=l(Pl,"To satisfy both these goals, browsers (atleast Firefox and Chrome) have two compilers for webassembly, the first compiles the module as it\u2019s called from the network, and is basically instant ("),it=n(Pl,"A",{href:!0,rel:!0});var Od=o(it);nr=l(Od,"here"),Od.forEach(a),or=l(Pl,", chrome devs claim that theirs can do on the order of 10+ mb of code per second, so the bottleneck will almost always be the speed of the network rather than the compiler.) The second does optimization and dynamically replaces the unoptimized bytecode from the first when it\u2019s done."),Pl.forEach(a),pr=c(Ce),ct=n(Ce,"P",{});var Cl=o(ct);lr=l(Cl,"It\u2019s interesting to note here that, "),Kn=n(Cl,"EM",{});var Fd=o(Kn);rr=l(Fd,"a priori"),Fd.forEach(a),ir=l(Cl," there\u2019s no reason to expect that webassembly code for high performance stuff [2] (like fractal calculation) will be any faster than its javascript counterpart. Since the hot loop (calculating escape time) is running many thousands of times, one would expect the javascript JIT compiler to infer the output types and get basically similar bytecode, while amortizing its greater overhead considering workload size."),Cl.forEach(a),cr=c(Ce),Zn=n(Ce,"P",{});var Ld=o(Zn);ur=l(Ld,"In a later article, I will be examining this conjecture, and taking a deeper look at the flamegraphs and bytecode generated by our benchmarks."),Ld.forEach(a),hr=c(Ce),Qn=n(Ce,"P",{});var jd=o(Qn);dr=l(jd,"The other interesting thing about webassembly is its memory model, programs do not have access to their own instructions and stack machine memory (so no self modifying code, and no messing with values on the stack). What they do have access to is a block of linear memory, which is backed by a javascript ArrayBuffer, and byte addressed (ie. memory[0] is 1 byte long.)"),jd.forEach(a),kr=c(Ce),eo=n(Ce,"P",{});var zd=o(eo);ao=n(zd,"EM",{});var Gd=o(ao);mr=l(Gd,"[1]I\u2019m not entirely sure why, but it\u2019s some combination of coding for a simple stack machine, having type information, linear memory, and being easy to parse."),Gd.forEach(a),zd.forEach(a),fr=c(Ce),ut=n(Ce,"P",{});var Ml=o(ut);ht=n(Ml,"EM",{});var Dl=o(ht);wr=l(Dl,"[2]This is "),so=n(Dl,"STRONG",{});var Nd=o(so);br=l(Nd,"mostly"),Nd.forEach(a),yr=l(Dl," true, except for vectorization. SIMD (Single Instruction Multiple Data) instructions are featured in the webassembly spec and implemented by chrome and firefox, which do not expose them in js, and have no plans to do so. (although"),Dl.forEach(a),vr=l(Ml," I "),to=n(Ml,"EM",{});var Hd=o(to);gr=l(Hd,"suppose there\u2019s nothing stopping a JIT from autovectorizing, is there?)"),Hd.forEach(a),Ml.forEach(a),Ce.forEach(a),Mp=c(s),Dp=n(s,"BR",{}),Wp=n(s,"BR",{}),Op=c(s),rn=n(s,"BLOCKQUOTE",{});var Bd=o(rn);cn=n(Bd,"P",{});var Wh=o(cn);no=n(Wh,"STRONG",{});var Yd=o(no);_r=l(Yd,"Our Approach to webassembly"),Yd.forEach(a),Er=l(Wh,": As many languages can be compiled to webassembly, we looked at two of the most commonly used ones: Rust & AssemblyScript. In the following sections we will describe our approach to these two languages."),Wh.forEach(a),Bd.forEach(a),Fp=c(s),Lp=n(s,"BR",{}),jp=n(s,"BR",{}),zp=c(s),dt=n(s,"H2",{});var Oh=o(dt);Tr=l(Oh,"Rust Implementation "),oo=n(Oh,"EM",{});var Ud=o(oo);xr=l(Ud,"by Jo Gao"),Ud.forEach(a),Oh.forEach(a),Gp=c(s),T=n(s,"DETAILS",{});var I=o(T);po=n(I,"SUMMARY",{});var Jd=o(po);Sr=l(Jd,"Click to Read"),Jd.forEach(a),Ar=c(I),lo=n(I,"H3",{});var qd=o(lo);Ir=l(qd,"Singlethreaded"),qd.forEach(a),Rr=c(I),kt=n(I,"P",{});var Wl=o(kt);Pr=l(Wl,"I wrote a similar implementation of the function in Rust that would return an ImageData object of the Mandelbrot Set. It uses "),mt=n(Wl,"A",{href:!0,rel:!0});var Xd=o(mt);Cr=l(Xd,"wasm-bindgen"),Xd.forEach(a),Mr=l(Wl,", a Rust library that will compile Rust code to webassembly, and then generate the bindings and glue between JavaScript and webassembly so that it can be run on the web. It handles all the type conversions between JavaScript and webassembly and facilitates the compilation of Rust to webassembly."),Wl.forEach(a),Dr=c(I),cs=n(I,"P",{});var Qs=o(cs);Wr=l(Qs,"In the iterative "),ro=n(Qs,"CODE",{});var Vd=o(ro);Or=l(Vd,"in_mandelbrot"),Vd.forEach(a),Fr=l(Qs," function, "),io=n(Qs,"CODE",{});var $d=o(io);Lr=l($d,"count"),$d.forEach(a),jr=l(Qs," is set to iterate all the way to 1000 for benchmarking purposes. When returning, "),co=n(Qs,"CODE",{});var Kd=o(co);zr=l(Kd,"count"),Kd.forEach(a),Gr=l(Qs," is set to 255 if larger than 255 to prevent having to cast numbers larger than 255 to u8."),Qs.forEach(a),Nr=c(I),un=n(I,"PRE",{class:!0});var ff=o(un);ff.forEach(a),Hr=c(I),uo=n(I,"P",{});var Zd=o(uo);Br=l(Zd,"The magic of wasm-bindgen kicks in here, allowing us to create the ImageData object right in the Rust code by providing the type and the constructor signature:"),Zd.forEach(a),Yr=c(I),hn=n(I,"PRE",{class:!0});var wf=o(hn);wf.forEach(a),Ur=c(I),Rs=n(I,"P",{});var On=o(Rs);Jr=l(On,"After compiling this code, wasm-bindgen outputs a number of files that are meant to be bundled using "),ft=n(On,"A",{href:!0,rel:!0});var Qd=o(ft);qr=l(Qd,"Webpack"),Qd.forEach(a),Xr=l(On," and imported to your JavaScript file as an ES6 module, allowing access to the functions that were written in Rust. The idea is that after compiling and importing the module, calling "),ho=n(On,"CODE",{});var ek=o(ho);Vr=l(ek,"run(...)"),ek.forEach(a),$r=l(On,"would return a whole JavaScript ImageData Object."),On.forEach(a),Kr=c(I),ko=n(I,"P",{});var ak=o(ko);Zr=l(ak,"Unfortunately, our Benchmarking Site is structured to use a web worker to call this function. Modules cannot be imported to web workers. However, they can be imported to module workers, web workers that support module import, but as of today, Firefox does not support this feature."),ak.forEach(a),Qr=c(I),wt=n(I,"P",{});var Ol=o(wt);ei=l(Ol,"This is an infeasible solution because I was unwilling to limit the availability of our benchmark site for this implementation. After many hours of tinkering with the existing setup, I found a workaround that eliminated the need for Webpack altogether: after compiling with wasm-bindgen, I copy and pasted the entire outputted .js file with the import and exports removed, appended the wrapper function I had written to it, and called "),mo=n(Ol,"CODE",{});var sk=o(mo);ai=l(sk,"init(...)"),sk.forEach(a),si=l(Ol," on the outputted .wasm."),Ol.forEach(a),ti=c(I),fo=n(I,"P",{});var tk=o(fo);ni=l(tk,"After confirming that this worked, A colleague and I wrote a shell script to automatically do this after compilation. Albeit a little unpleasant on the eyes, it does the job:"),tk.forEach(a),oi=c(I),dn=n(I,"PRE",{class:!0});var bf=o(dn);bf.forEach(a),pi=c(I),wo=n(I,"H3",{});var nk=o(wo);li=l(nk,"Rust & Webassembly Multi-Threaded"),nk.forEach(a),ri=c(I),bo=n(I,"P",{});var ok=o(bo);ii=l(ok,"To further improve performance in Rust, I carried out the same calculations, but in parallel this time. An advantage of the Mandelbrot Set is that determining whether a pixel falls within the set or not can be done completely independently of other pixels. The outcome of each pixel has no effect on the others, making the transition to multithreading straightforward."),ok.forEach(a),ci=c(I),bt=n(I,"P",{});var Fl=o(bt);ui=l(Fl,"I used the "),yt=n(Fl,"A",{href:!0,rel:!0});var pk=o(yt);hi=l(pk,"Parallel Raytracing example"),pk.forEach(a),di=l(Fl,". given in the Wasm-Bindgen repo, as a starting point. Using a combination of web workers and the Rayon Crate for data parallelism in Rust yielded a pretty fast multithreaded Mandelbrot Set."),Fl.forEach(a),ki=c(I),Js=n(I,"P",{});var Ip=o(Js);yo=n(Ip,"EM",{});var lk=o(yo);mi=l(lk,"Unfortunately,"),lk.forEach(a),fi=l(Ip," I "),vo=n(Ip,"EM",{});var rk=o(vo);wi=l(rk,"was unable to include this version of the Mandelbrot in the final Benchmarking website"),rk.forEach(a),bi=l(Ip," because I ran into a similar problem with the wasm-bindgen and module output. This time, it was further complicated by the Webworkers being created from within the Rust code. The funky workaround that had allowed for the singlethreaded RustWasm example to run on the Benchmarking Site failed to work the same magic for this implementation."),Ip.forEach(a),yi=c(I),go=n(I,"P",{});var ik=o(go);vi=l(ik,"This version of the Mandelbrot also makes use of the SharedArrayBuffer, and had it been on the site, would not work in Safari and browsers that do not support SharedArrayBuffer Objects."),ik.forEach(a),I.forEach(a),Np=c(s),Hp=n(s,"BR",{}),Bp=c(s),Yp=n(s,"BR",{}),Up=c(s),vt=n(s,"H2",{});var Fh=o(vt);gi=l(Fh,"AssemblyScript "),_o=n(Fh,"EM",{});var ck=o(_o);_i=l(ck,"by Abhishek Cherath"),ck.forEach(a),Fh.forEach(a),Jp=c(s),w=n(s,"DETAILS",{});var b=o(w);Eo=n(b,"SUMMARY",{});var uk=o(Eo);Ei=l(uk,"Click to Read"),uk.forEach(a),Ti=c(b),To=n(b,"P",{});var hk=o(To);xi=l(hk,"AssemblyScript compiles a subset of typescript to webassembly. To get an idea of how simple it is to write it, here\u2019s essentially the same javascript code from earlier, with type annotations and minor changes for webassembly:"),hk.forEach(a),Si=c(b),kn=n(b,"PRE",{class:!0});var yf=o(kn);yf.forEach(a),Ai=c(b),gt=n(b,"P",{});var Ll=o(gt);Ii=l(Ll,"The only really noteworthy change was to not have "),xo=n(Ll,"CODE",{});var dk=o(xo);Ri=l(dk,"new"),dk.forEach(a),Pi=l(Ll," in the hot loop. The Assemblyscript garbage collector had some trouble with it and total allocation would exceed webassembly\u2019s 100 page memory limit[1]. I suspect that sort of code will be usable once the webassembly GC proposals, which allow wasm modules to hook into the browser\u2019s GC, are implemented."),Ll.forEach(a),Ci=c(b),So=n(b,"H3",{});var kk=o(So);Mi=l(kk,"Threading"),kk.forEach(a),Di=c(b),_t=n(b,"P",{});var jl=o(_t);Wi=l(jl,"The fastest way to thread code in browsers is to use "),Et=n(jl,"A",{href:!0,rel:!0});var mk=o(Et);Oi=l(mk,"SharedArrayBuffer"),mk.forEach(a),Fi=l(jl,", this also requires the following CORS headers."),jl.forEach(a),Li=c(b),mn=n(b,"PRE",{class:!0});var vf=o(mn);vf.forEach(a),ji=c(b),Ao=n(b,"P",{});var fk=o(Ao);zi=l(fk,"This is to ensure cross-origin isolation, which protects against memory being exfiltrated somehow (I might explore this in the future, but that\u2019s about all I know for the moment.) webassembly memories can also be created with a backing SharedArrayBuffer, which allows fast multithreading, as separate web-workers can run the same webassembly module and write their results to the same memory, meaning that large objects don\u2019t need to be passed around using postmessage, and the many O(N) overheads to do with copying and creating new arrays can be avoided."),fk.forEach(a),Gi=c(b),Tt=n(b,"P",{});var zl=o(Tt);Ni=l(zl,"However, while Assemblyscript "),xt=n(zl,"A",{href:!0,rel:!0});var wk=o(xt);Hi=l(wk,"allows"),wk.forEach(a),Bi=l(zl," access to atomic instructions, it does not implement any sort of locking. So any program that reads and writes to memory will need to be adjusted to thread with shared memory. This means that the program seen above, with its Complex class and set calls reading and wrxiting to the linear memory quite often, is very prone to\u2026 interesting behaviour when threaded."),zl.forEach(a),Yi=c(b),fn=n(b,"DIV",{align:!0});var bk=o(fn);St=n(bk,"IMG",{style:!0,src:!0,alt:!0}),bk.forEach(a),Ui=c(b),Io=n(b,"P",{});var yk=o(Io);Ji=l(yk,"Exhibit A of nondeterministic behavior"),yk.forEach(a),qi=c(b),Ro=n(b,"P",{});var vk=o(Ro);Xi=l(vk,"That being said, for small examples such as fractal calculation, it\u2019s quite easy to limit mutability to local variables (which are on the stack, not in the linear memory, and so are not shared) and avoid the problem entirely. Like in the following code:"),vk.forEach(a),Vi=c(b),wn=n(b,"PRE",{class:!0});var gf=o(wn);gf.forEach(a),$i=c(b),Po=n(b,"P",{});var gk=o(Po);Co=n(gk,"EM",{});var _k=o(Co);Ki=l(_k,"note that the store instruction there might look like it would cause issues, but as long as threads work on different parts of the image, that should not be a problem."),_k.forEach(a),gk.forEach(a),Zi=c(b),Mo=n(b,"H3",{});var Ek=o(Mo);Qi=l(Ek,"SIMD"),Ek.forEach(a),ec=c(b),Do=n(b,"P",{});var Tk=o(Do);ac=l(Tk,"SIMD (Single Instruction Multiple Data) instructions are special instructions on the CPU that allow multiple additions, multiplications etc to be carried out in parallel on the same core)"),Tk.forEach(a),sc=c(b),Wo=n(b,"P",{});var xk=o(Wo);bn=n(xk,"IMG",{src:!0,alt:!0}),xk.forEach(a),tc=c(b),yn=n(b,"P",{});var Lh=o(yn);nc=l(Lh,"By Vadikus - Own work, CC BY-SA 4.0, "),At=n(Lh,"A",{href:!0,rel:!0});var Sk=o(At);oc=l(Sk,"https://commons.wikimedia.org/w/index.php?curid=39715273"),Sk.forEach(a),Lh.forEach(a),pc=c(b),Ps=n(b,"P",{});var Fn=o(Ps);lc=l(Fn,"They\u2019re not in the webassembly spec as yet, but should be "),It=n(Fn,"A",{href:!0,rel:!0});var Ak=o(It);rc=l(Ak,"soon"),Ak.forEach(a),ic=l(Fn,", and are currently available on chrome and firefox (although not on ARM in firefox 89, ie. apple M1.) Assemblyscript does not autovectorize code, but "),Rt=n(Fn,"A",{href:!0,rel:!0});var Ik=o(Rt);cc=l(Ik,"allows"),Ik.forEach(a),uc=l(Fn," access to the instructions, and provides some sugar for different types and functions to initialise constant vectors."),Fn.forEach(a),hc=c(b),Cs=n(b,"P",{});var Ln=o(Cs);dc=l(Ln,"The vector size in the proposal is 128 bit, which is a decent compromise and is backed by hardware instructions on most modern computers. In the future, "),Pt=n(Ln,"A",{href:!0,rel:!0});var Rk=o(Pt);kc=l(Rk,"flexible vectors"),Rk.forEach(a),mc=l(Ln,", should be able to allow access to 256, 512 bit vectors that modern intel and AMD CPUs support (consumer ARM chips currently only have 128 bit vectors, as far as I\u2019m aware, although "),Ct=n(Ln,"A",{href:!0,rel:!0});var Pk=o(Ct);fc=l(Pk,"supercomputer ARM chips do have 512 bit vectors"),Pk.forEach(a),wc=l(Ln,".)"),Ln.forEach(a),bc=c(b),Oo=n(b,"P",{});var Ck=o(Oo);yc=l(Ck,"Vectorizing the mandelbrot code above is not too bad, althought it does look rather messy:"),Ck.forEach(a),vc=c(b),vn=n(b,"PRE",{class:!0});var _f=o(vn);_f.forEach(a),gc=c(b),Fo=n(b,"P",{});var Mk=o(Fo);_c=l(Mk,"This should basically be a 4x speedup over the previous code, when run single threaded. Multithreaded, that number will vary depending on how threads are allocated, as work only gets completed as fast as the slowest thread."),Mk.forEach(a),Ec=c(b),Lo=n(b,"H3",{});var Dk=o(Lo);Tc=l(Dk,"Compiler Flags"),Dk.forEach(a),xc=c(b),Ms=n(b,"P",{});var jn=o(Ms);Sc=l(jn,"For the examples above, some memory is reserved for the purposes of storing the image, in assemblyscript this is achieved by passing the "),jo=n(jn,"CODE",{});var Wk=o(jo);Ac=l(Wk,"--memoryBase"),Wk.forEach(a),Ic=l(jn," flag to the "),zo=n(jn,"CODE",{});var Ok=o(zo);Rc=l(Ok,"asc"),Ok.forEach(a),Pc=l(jn," compiler (as seen in the makefile below)"),jn.forEach(a),Cc=c(b),Mt=n(b,"P",{});var Gl=o(Mt);Mc=l(Gl,"The other flags are tuned for maximum performance (thanks to "),Dt=n(Gl,"A",{href:!0,rel:!0});var Fk=o(Dt);Dc=l(Fk,"Max Graey"),Fk.forEach(a),Wc=l(Gl," for -O3 instead of -O3s/z) and to enable necessary features (threads, SIMD.)"),Gl.forEach(a),Oc=c(b),gn=n(b,"PRE",{class:!0});var Ef=o(gn);Ef.forEach(a),Fc=c(b),Go=n(b,"H3",{});var Lk=o(Go);Lc=l(Lk,"Multithreaded SIMD Speed"),Lk.forEach(a),jc=c(b),Ds=n(b,"P",{});var zn=o(Ds);zc=l(zn,"Benchmark results will be discussed near the end of this article, but the speed of the multithreaded SIMD code is quite astonishing, roughly 3x the speed of multithreaded JS using sharedarraybuffers, and I\u2019m guessing that\u2019s held back by module message passing overheads. "),Wt=n(zn,"A",{href:!0,rel:!0});var jk=o(Wt);Gc=l(jk,"HERE"),jk.forEach(a),Nc=l(zn," is a basic mandelbrot zoom implementation using it (only works in firefox(\u226590 on apple m1) and chrome, "),Ot=n(zn,"A",{href:!0,rel:!0});var zk=o(Ot);Hc=l(zk,"here\u2019s"),zk.forEach(a),Bc=l(zn," the github repo.) I\u2019ll be working in boundary estimation and period checking along with xaos zoom algorithm into it in a couple of months, so stay tuned for that!"),zn.forEach(a),Yc=c(b),No=n(b,"P",{});var Gk=o(No);Uc=l(Gk,"I\u2019m also fairly certain that this is the first(?) SIMD mandelbrot implementation for webassembly, so if anyone wants to use it for anything (under the terms of the GPLv3 License) feel free!"),Gk.forEach(a),Jc=c(b),Ho=n(b,"P",{});var Nk=o(Ho);Bo=n(Nk,"EM",{});var Hk=o(Bo);qc=l(Hk,"[1] A page being 64KiB (65,536 bytes), so about 6.5 mb max memory"),Hk.forEach(a),Nk.forEach(a),b.forEach(a),qp=c(s),Xp=n(s,"BR",{}),Vp=c(s),$p=n(s,"BR",{}),Kp=c(s),_n=n(s,"H2",{});var Bk=o(_n);Xc=l(Bk,"Results"),Bk.forEach(a),Zp=c(s),En=n(s,"P",{});var Yk=o(En);Vc=l(Yk,"First, we know that our benchmarks here are not rigorous in the slightest. Their purpose was to give us an idea of the rough performance capabilities of the tools we\u2019re working with, to help inform our choices as we port certain programs (stay tuned!) to webassembly. We will be refining this tool in the future, and hope to have (somehow) bytecode outputs and flamegraphs on the site."),Yk.forEach(a),Qp=c(s),qs=n(s,"TABLE",{});var Nl=o(qs);Yo=n(Nl,"THEAD",{});var Uk=o(Yo);Ws=n(Uk,"TR",{});var Gn=o(Ws);Uo=n(Gn,"TH",{});var Jk=o(Uo);$c=l(Jk,"Benchmark"),Jk.forEach(a),Kc=c(Gn),Jo=n(Gn,"TH",{});var qk=o(Jo);Zc=l(qk,"Firefox 89(ms)"),qk.forEach(a),Qc=c(Gn),qo=n(Gn,"TH",{});var Xk=o(qo);eu=l(Xk,"Chrome 91 (ms)"),Xk.forEach(a),Gn.forEach(a),Uk.forEach(a),au=c(Nl),qe=n(Nl,"TBODY",{});var ba=o(qe);Os=n(ba,"TR",{});var Nn=o(Os);Xo=n(Nn,"TD",{});var Vk=o(Xo);su=l(Vk,"Naive-js"),Vk.forEach(a),tu=c(Nn),Vo=n(Nn,"TD",{});var $k=o(Vo);nu=l($k,"2992"),$k.forEach(a),ou=c(Nn),$o=n(Nn,"TD",{});var Kk=o($o);pu=l(Kk,"631"),Kk.forEach(a),Nn.forEach(a),lu=c(ba),Fs=n(ba,"TR",{});var Hn=o(Fs);Ko=n(Hn,"TD",{});var Zk=o(Ko);ru=l(Zk,"Improved-js"),Zk.forEach(a),iu=c(Hn),Zo=n(Hn,"TD",{});var Qk=o(Zo);cu=l(Qk,"1755"),Qk.forEach(a),uu=c(Hn),Qo=n(Hn,"TD",{});var em=o(Qo);hu=l(em,"292"),em.forEach(a),Hn.forEach(a),du=c(ba),Ls=n(ba,"TR",{});var Bn=o(Ls);ep=n(Bn,"TD",{});var am=o(ep);ku=l(am,"Multithreaded-js"),am.forEach(a),mu=c(Bn),ap=n(Bn,"TD",{});var sm=o(ap);fu=l(sm,"705"),sm.forEach(a),wu=c(Bn),sp=n(Bn,"TD",{});var tm=o(sp);bu=l(tm,"129"),tm.forEach(a),Bn.forEach(a),yu=c(ba),js=n(ba,"TR",{});var Yn=o(js);tp=n(Yn,"TD",{});var nm=o(tp);vu=l(nm,"Singlethreaded-Rust * **"),nm.forEach(a),gu=c(Yn),np=n(Yn,"TD",{});var om=o(np);_u=l(om,"296"),om.forEach(a),Eu=c(Yn),op=n(Yn,"TD",{});var pm=o(op);Tu=l(pm,"300"),pm.forEach(a),Yn.forEach(a),xu=c(ba),zs=n(ba,"TR",{});var Un=o(zs);pp=n(Un,"TD",{});var lm=o(pp);Su=l(lm,"Simple Assemblyscript"),lm.forEach(a),Au=c(Un),lp=n(Un,"TD",{});var rm=o(lp);Iu=l(rm,"494"),rm.forEach(a),Ru=c(Un),rp=n(Un,"TD",{});var im=o(rp);Pu=l(im,"497"),im.forEach(a),Un.forEach(a),Cu=c(ba),Gs=n(ba,"TR",{});var Jn=o(Gs);ip=n(Jn,"TD",{});var cm=o(ip);Mu=l(cm,"Optimized non-SIMD AssemblyScript"),cm.forEach(a),Du=c(Jn),cp=n(Jn,"TD",{});var um=o(cp);Wu=l(um,"250"),um.forEach(a),Ou=c(Jn),up=n(Jn,"TD",{});var hm=o(up);Fu=l(hm,"262"),hm.forEach(a),Jn.forEach(a),Lu=c(ba),Ns=n(ba,"TR",{});var qn=o(Ns);hp=n(qn,"TD",{});var dm=o(hp);ju=l(dm,"Optimized SIMD AssemblyScript"),dm.forEach(a),zu=c(qn),dp=n(qn,"TD",{});var km=o(dp);Gu=l(km,"124"),km.forEach(a),Nu=c(qn),kp=n(qn,"TD",{});var mm=o(kp);Hu=l(mm,"108"),mm.forEach(a),qn.forEach(a),Bu=c(ba),Hs=n(ba,"TR",{});var Xn=o(Hs);mp=n(Xn,"TD",{});var fm=o(mp);Yu=l(fm,"SIMD Multithreaded AssemblyScript"),fm.forEach(a),Uu=c(Xn),fp=n(Xn,"TD",{});var wm=o(fp);Ju=l(wm,"43"),wm.forEach(a),qu=c(Xn),wp=n(Xn,"TD",{});var bm=o(wp);Xu=l(bm,"43"),bm.forEach(a),Xn.forEach(a),ba.forEach(a),Nl.forEach(a),el=c(s),Tn=n(s,"P",{});var ym=o(Tn);bp=n(ym,"EM",{});var vm=o(bp);Vu=l(vm,"All numbers approximate, gathered from fresh browser session after reboot on an HP Envy 13 with an i5-8265U CPU @ 1.60GHz and 8gb of RAM running Ubuntu 20.04.2 with kernel 5.8.0. Average of 5 runs (first 2 runs dropped)"),vm.forEach(a),ym.forEach(a),al=c(s),Xs=n(s,"P",{});var Hl=o(Xs);$u=l(Hl,"The results of our benchmark (at least approximately) line up with what one would expect, but we find a few items of interest. First, as far as the javascript implementations are concerned, Firefox is "),yp=n(Hl,"EM",{});var gm=o(yp);Ku=l(gm,"significantly"),gm.forEach(a),Zu=l(Hl," slower than chrome. Second, webassembly speeds are comparable for both browsers."),Hl.forEach(a),sl=c(s),xn=n(s,"P",{});var _m=o(xn);Qu=l(_m,"The performance advantage of webassembly (without SIMD) over javascript for this benchmark is basically negligible for chrome. In a future article it\u2019ll be interesting to see whether the bytecode generated is also similar."),_m.forEach(a),tl=c(s),Vs=n(s,"P",{});var Bl=o(Vs);eh=l(Bl,"But the key insight here is clear, webassembly offers "),vp=n(Bl,"EM",{});var Em=o(vp);ah=l(Em,"predictable"),Em.forEach(a),sh=l(Bl," performance, across browser engines. We\u2019ll be adding fallbacks for safari later to see if this holds there as well. Further, we\u2019ll compare the results to native code."),Bl.forEach(a),nl=c(s),Ft=n(s,"P",{});var jh=o(Ft);th=l(jh,"*"),gp=n(jh,"EM",{});var Tm=o(gp);nh=l(Tm,"The rust code can likely be sped up with some optimizations here and there, but for a rough effort from a novice rust programmer, this is representative."),Tm.forEach(a),jh.forEach(a),ol=c(s),Sn=n(s,"P",{});var xm=o(Sn);_p=n(xm,"EM",{});var Sm=o(_p);oh=l(Sm,"** The rust code was improved by @MaxGraey and now lines up with what one would expect"),Sm.forEach(a),xm.forEach(a),pl=c(s),$s=n(s,"P",{});var Yl=o($s);ph=l(Yl,"See the demo "),Lt=n(Yl,"A",{href:!0,rel:!0});var Am=o(Lt);lh=l(Am,"here"),Am.forEach(a),rh=l(Yl,"."),Yl.forEach(a),ll=c(s),rl=n(s,"BR",{}),il=c(s),An=n(s,"H2",{});var Im=o(An);ih=l(Im,"Final Thoughts"),Im.forEach(a),cl=c(s),Ks=n(s,"P",{});var Ul=o(Ks);ch=l(Ul,"As tools of application distribution, browsers have some undeniable advantages over the traditional pipeline of download \u2192 extract onto disk \u2192 load from disk for execution. For most programs, it is technically unnecessary to have "),Ep=n(Ul,"EM",{});var Rm=o(Ep);uh=l(Rm,"all"),Rm.forEach(a),hh=l(Ul," of their assets present to be able to enjoy some subset of their capabilities. Of course, adding such partial update capabilities is non-trivial, and would add significant complexity. But web developers and browser vendors have made a lot of progress in enabling this essentially by default, and with webassembly, enabling it in areas where it\u2019s not previously been feasible."),Ul.forEach(a),ul=c(s),Zs=n(s,"P",{});var Jl=o(Zs);dh=l(Jl,"Further, cloud offloading enables users to easily sustain state across devices and in some cases avoid calculation heavy code in the interests of battery life or smooth performance. The easiest way to realize these advantages is to distribute one\u2019s application in an environment that does this "),Tp=n(Jl,"EM",{});var Pm=o(Tp);kh=l(Pm,"by default"),Pm.forEach(a),mh=l(Jl,": the browser. But a prerequisite for this is that the experience is not overly hampered by being in the browser, and bringing webassembly to near native performance is a key part of that."),Jl.forEach(a),hl=c(s),In=n(s,"P",{});var Cm=o(In);fh=l(Cm,"There is an opportunity here to allow people to access performance heavy applications like games and simulations on their devices without having to get into the nasty business of managing local state, which accounts for what, 99% of problems installing and using software? We want to help build this, and over the next few weeks, will be releasing demos to show what it might look like, so stay tuned!"),Cm.forEach(a),dl=c(s),Rn=n(s,"P",{});var Mm=o(Rn);xp=n(Mm,"EM",{});var Dm=o(xp);wh=l(Dm,"Of course, the possible bad end here is that the canvas ends up as an inefficient GUI toolkit to have fungible programmers at the cost of user experience, we hope that doesn\u2019t happen."),Dm.forEach(a),Mm.forEach(a),kl=c(s),ml=n(s,"BR",{}),fl=c(s),Pn=n(s,"H2",{});var Wm=o(Pn);bh=l(Wm,"Further Reading:"),Wm.forEach(a),wl=c(s),jt=n(s,"P",{});var zh=o(jt);yh=l(zh,"David Beazley. (2019). A Talk Near the Future of Python (a.k.a., Dave live-codes a Webassembly Interpreter). "),zt=n(zh,"A",{href:!0,rel:!0});var Om=o(zt);vh=l(Om,"https://www.youtube.com/watch?v=r-A78RgMhZU"),Om.forEach(a),zh.forEach(a),bl=c(s),Gt=n(s,"P",{});var Gh=o(Gt);gh=l(Gh,"Firefox\u2019s low-latency webassembly compiler \u2013 wingolog. (n.d.). Retrieved June 19, 2021, from "),Nt=n(Gh,"A",{href:!0,rel:!0});var Fm=o(Nt);_h=l(Fm,"https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),Fm.forEach(a),Gh.forEach(a),yl=c(s),Ht=n(s,"P",{});var Nh=o(Ht);Eh=l(Nh,"firefox\u2019s low-latency webassembly compiler\u2014Wingolog. (n.d.). Retrieved June 19, 2021, from "),Bt=n(Nh,"A",{href:!0,rel:!0});var Lm=o(Bt);Th=l(Lm,"https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),Lm.forEach(a),Nh.forEach(a),vl=c(s),Yt=n(s,"P",{});var Hh=o(Yt);xh=l(Hh,"Pereira, F. M. Q., & Palsberg, J. (2006). Register Allocation After Classical SSA Elimination is NP-Complete. In L. Aceto & A. Ing\xF3lfsd\xF3ttir (Eds.), Foundations of Software Science and Computation Structures (Vol. 3921, pp. 79\u201393). Springer Berlin Heidelberg. "),Ut=n(Hh,"A",{href:!0,rel:!0});var jm=o(Ut);Sh=l(jm,"https://doi.org/10.1007/11690634_6"),jm.forEach(a),Hh.forEach(a),gl=c(s),Jt=n(s,"P",{});var Bh=o(Jt);Ah=l(Bh,"WebAssembly. (n.d.). Retrieved June 19, 2021, from "),qt=n(Bh,"A",{href:!0,rel:!0});var zm=o(qt);Ih=l(zm,"https://webassembly.org/"),zm.forEach(a),Bh.forEach(a),_l=c(s),Xt=n(s,"P",{});var Yh=o(Xt);Rh=l(Yh,"WebAssembly compilation pipeline \xB7 V8. (n.d.). Retrieved June 19, 2021, from "),Vt=n(Yh,"A",{href:!0,rel:!0});var Gm=o(Vt);Ph=l(Gm,"https://v8.dev/docs/wasm-compilation-pipeline"),Gm.forEach(a),Yh.forEach(a),El=c(s),Cn=n(s,"P",{});var Nm=o(Cn);Sp=n(Nm,"EM",{});var Hm=o(Sp);Ch=l(Hm,Zm),Hm.forEach(a),Nm.forEach(a),this.h()},h(){Pa(R,"width","100%"),ya(R.src,N="/blog-1-mandel-thumbnail.webp")||d(R,"src",N),d(R,"alt","Thumbnail"),d(g,"align","center"),d(D,"href","https://js-wasm-mandelbrot-benchmark-3.vercel.app/"),d(D,"rel","nofollow"),d(te,"href","https://github.com/AO-Design-Inc/js-wasm-mandelbrot-benchmark"),d(te,"rel","nofollow"),Pa(Q,"width","100%"),ya(Q.src,oe="/blog-1-mandel-renderer.png")||d(Q,"src",oe),d(Q,"alt","Thumbnail"),d(ne,"align","center"),d(We,"href","https://mandelbrot-ascript.vercel.app/"),d(We,"rel","nofollow"),d(V,"href","https://js-wasm-mandelbrot-benchmark-3.vercel.app/"),d(V,"rel","nofollow"),d(M,"class","language-jsx"),d(le,"class","language-jsx"),d(Ie,"href","https://en.wikipedia.org/wiki/Plotting_algorithms_for_the_Mandelbrot_set"),d(Ie,"rel","nofollow"),d(Fa,"class","language-jsx"),d(La,"class","language-jsx"),Pa(Ia,"width","100%"),ya(Ia.src,Xa="/blog-1-mandel-hypnot.png")||d(Ia,"src",Xa),d(Ia,"alt","Thumbnail"),d(qa,"align","center"),d(Qa,"class","language-jsx"),d(za,"class","language-jsx"),d(Ss,"class","language-jsx"),d(As,"class","language-jsx"),d(Is,"href","https://www.notion.so/On-WebAssembly-Performance-and-the-Mandelbrot-WORKING-TITLE-96760f3f113343c894c00f52cdef3ef0"),d(Is,"rel","nofollow"),d(fs,"href","https://hacks.mozilla.org/2017/02/a-cartoon-intro-to-webassembly/"),d(fs,"rel","nofollow"),d(pt,"href","https://developer.mozilla.org/en-US/docs/WebAssembly"),d(pt,"rel","nofollow"),d(it,"href","https://v8.dev/docs/wasm-compilation-pipeline"),d(it,"rel","nofollow"),d(mt,"href","https://rustwasm.github.io/wasm-bindgen/"),d(mt,"rel","nofollow"),d(un,"class","language-rust"),d(hn,"class","language-rust"),d(ft,"href","https://webpack.js.org/"),d(ft,"rel","nofollow"),d(dn,"class","language-bash"),d(yt,"href","https://github.com/rustwasm/wasm-bindgen/tree/master/examples/raytrace-parallel"),d(yt,"rel","nofollow"),d(kn,"class","language-jsx"),d(Et,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer"),d(Et,"rel","nofollow"),d(mn,"class","language-jsx"),d(xt,"href","https://www.assemblyscript.org/stdlib/builtins.html#atomics-%F0%9F%A6%84"),d(xt,"rel","nofollow"),Pa(St,"width","100%"),ya(St.src,Uh="/blog-1-mandel-glitch.png")||d(St,"src",Uh),d(St,"alt","Thumbnail"),d(fn,"align","center"),d(wn,"class","language-jsx"),ya(bn.src,Jh="https://upload.wikimedia.org/wikipedia/commons/c/ce/SIMD2.svg")||d(bn,"src",Jh),d(bn,"alt","SIMD Explaination"),d(At,"href","https://commons.wikimedia.org/w/index.php?curid=39715273"),d(At,"rel","nofollow"),d(It,"href","https://webassembly.github.io/simd/core/exec/instructions.html#simd-instructions"),d(It,"rel","nofollow"),d(Rt,"href","https://www.assemblyscript.org/stdlib/builtins.html#simd-%F0%9F%A6%84"),d(Rt,"rel","nofollow"),d(Pt,"href","https://github.com/WebAssembly/flexible-vectors"),d(Pt,"rel","nofollow"),d(Ct,"href","https://en.wikipedia.org/wiki/AArch64#Scalable_Vector_Extension_(SVE)"),d(Ct,"rel","nofollow"),d(vn,"class","language-jsx"),d(Dt,"href","https://github.com/MaxGraey"),d(Dt,"rel","nofollow"),d(gn,"class","language-makefile"),d(Wt,"href","https://mandelbrot-ascript.vercel.app/"),d(Wt,"rel","nofollow"),d(Ot,"href","https://github.com/pretentious7/mandelbrot-ascript"),d(Ot,"rel","nofollow"),d(Lt,"href","https://js-wasm-mandelbrot-benchmark-3.vercel.app/"),d(Lt,"rel","nofollow"),d(zt,"href","https://www.youtube.com/watch?v=r-A78RgMhZU"),d(zt,"rel","nofollow"),d(Nt,"href","https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),d(Nt,"rel","nofollow"),d(Bt,"href","https://wingolog.org/archives/2020/03/25/firefoxs-low-latency-webassembly-compiler"),d(Bt,"rel","nofollow"),d(Ut,"href","https://doi.org/10.1007/11690634_6"),d(Ut,"rel","nofollow"),d(qt,"href","https://webassembly.org/"),d(qt,"rel","nofollow"),d(Vt,"href","https://v8.dev/docs/wasm-compilation-pipeline"),d(Vt,"rel","nofollow")},m(s,m){r(s,g,m),e(g,R),r(s,x,m),r(s,E,m),e(E,C),r(s,S,m),r(s,ue,m),e(ue,Xe),e(ue,D),e(D,ea),e(ue,va),e(ue,te),e(te,H),e(ue,Me),r(s,aa,m),r(s,O,m),e(O,De),r(s,B,m),r(s,he,m),e(he,Ve),r(s,ge,m),r(s,F,m),e(F,sa),Jm(P,F,null),e(F,ta),Jm(_e,F,null),e(F,Ee),r(s,J,m),r(s,ne,m),e(ne,Q),r(s,ha,m),r(s,q,m),e(q,de),e(q,We),e(We,$e),e(q,X),r(s,Oe,m),r(s,Te,m),e(Te,ee),r(s,ae,m),r(s,ke,m),e(ke,V),e(V,me),e(ke,Fe),e(ke,fe),e(fe,Le),e(ke,pe),r(s,xe,m),r(s,se,m),e(se,da),r(s,we,m),r(s,M,m),M.innerHTML=na,r(s,ka,m),r(s,Y,m),e(Y,$),e($,be),r(s,oa,m),r(s,le,m),le.innerHTML=ga,r(s,K,m),r(s,U,m),e(U,ma),e(U,L),e(L,je),e(U,Se),r(s,pa,m),r(s,Z,m),e(Z,Ae),e(Z,Ie),e(Ie,ze),e(Z,re),r(s,Ge,m),r(s,ie,m),e(ie,k),r(s,y,m),r(s,W,m),e(W,Re),e(Re,Ne),e(W,_a),e(W,ye),e(ye,Ea),e(W,Ta),e(W,ce),e(ce,j),e(W,Ca),e(W,He),e(He,la),e(W,Ma),e(W,Be),e(Be,ra),e(W,Da),e(W,Ye),e(Ye,Ke),e(W,Wa),e(W,Ue),e(Ue,ve),r(s,Pe,m),r(s,xa,m),r(s,z,m),r(s,Ze,m),r(s,ia,m),r(s,Je,m),e(Je,fa),e(Je,Sa),e(Sa,Na),r(s,Oa,m),r(s,_,m),e(_,Ha),e(Ha,Ka),e(_,wa),e(_,Aa),e(Aa,ss),e(_,u),e(_,f),e(f,ca),e(_,us),e(_,Fa),Fa.innerHTML=ts,e(_,hs),e(_,Ba),e(Ba,Ya),e(_,ds),e(_,La),La.innerHTML=ns,e(_,Ua),e(_,Za),e(Za,os),e(_,Ja),e(_,qa),e(qa,Ia),e(_,ja),e(_,ps),e(ps,h),e(_,v),e(_,Ra),e(Ra,ws),e(_,bs),e(_,Qa),Qa.innerHTML=ys,e(_,vs),e(_,za),za.innerHTML=et,e(_,gs),e(_,Va),e(Va,_s),e(_,ls),e(_,rs),e(rs,Es),e(_,Ts),e(_,is),e(is,xs),e(_,$t),e(_,Ss),Ss.innerHTML=Kt,e(_,Zt),e(_,As),As.innerHTML=ks,e(_,Qt),e(_,ms),e(ms,en),e(ms,Is),e(Is,Bs),e(ms,an),r(s,$a,m),r(s,at,m),r(s,st,m),r(s,tt,m),r(s,nt,m),r(s,Qe,m),e(Qe,sn),e(Qe,Ys),e(Ys,tn),r(s,ot,m),r(s,G,m),e(G,Us),e(Us,nn),e(G,on),e(G,es),e(es,pn),e(es,fs),e(fs,ln),e(es,ql),e(es,pt),e(pt,Xl),e(es,Vl),e(G,$l),e(G,Vn),e(Vn,Kl),e(G,Zl),e(G,lt),e(lt,Ql),e(lt,$n),e($n,er),e(lt,ar),e(G,sr),e(G,rt),e(rt,tr),e(rt,it),e(it,nr),e(rt,or),e(G,pr),e(G,ct),e(ct,lr),e(ct,Kn),e(Kn,rr),e(ct,ir),e(G,cr),e(G,Zn),e(Zn,ur),e(G,hr),e(G,Qn),e(Qn,dr),e(G,kr),e(G,eo),e(eo,ao),e(ao,mr),e(G,fr),e(G,ut),e(ut,ht),e(ht,wr),e(ht,so),e(so,br),e(ht,yr),e(ut,vr),e(ut,to),e(to,gr),r(s,Mp,m),r(s,Dp,m),r(s,Wp,m),r(s,Op,m),r(s,rn,m),e(rn,cn),e(cn,no),e(no,_r),e(cn,Er),r(s,Fp,m),r(s,Lp,m),r(s,jp,m),r(s,zp,m),r(s,dt,m),e(dt,Tr),e(dt,oo),e(oo,xr),r(s,Gp,m),r(s,T,m),e(T,po),e(po,Sr),e(T,Ar),e(T,lo),e(lo,Ir),e(T,Rr),e(T,kt),e(kt,Pr),e(kt,mt),e(mt,Cr),e(kt,Mr),e(T,Dr),e(T,cs),e(cs,Wr),e(cs,ro),e(ro,Or),e(cs,Fr),e(cs,io),e(io,Lr),e(cs,jr),e(cs,co),e(co,zr),e(cs,Gr),e(T,Nr),e(T,un),un.innerHTML=Qm,e(T,Hr),e(T,uo),e(uo,Br),e(T,Yr),e(T,hn),hn.innerHTML=ef,e(T,Ur),e(T,Rs),e(Rs,Jr),e(Rs,ft),e(ft,qr),e(Rs,Xr),e(Rs,ho),e(ho,Vr),e(Rs,$r),e(T,Kr),e(T,ko),e(ko,Zr),e(T,Qr),e(T,wt),e(wt,ei),e(wt,mo),e(mo,ai),e(wt,si),e(T,ti),e(T,fo),e(fo,ni),e(T,oi),e(T,dn),dn.innerHTML=af,e(T,pi),e(T,wo),e(wo,li),e(T,ri),e(T,bo),e(bo,ii),e(T,ci),e(T,bt),e(bt,ui),e(bt,yt),e(yt,hi),e(bt,di),e(T,ki),e(T,Js),e(Js,yo),e(yo,mi),e(Js,fi),e(Js,vo),e(vo,wi),e(Js,bi),e(T,yi),e(T,go),e(go,vi),r(s,Np,m),r(s,Hp,m),r(s,Bp,m),r(s,Yp,m),r(s,Up,m),r(s,vt,m),e(vt,gi),e(vt,_o),e(_o,_i),r(s,Jp,m),r(s,w,m),e(w,Eo),e(Eo,Ei),e(w,Ti),e(w,To),e(To,xi),e(w,Si),e(w,kn),kn.innerHTML=sf,e(w,Ai),e(w,gt),e(gt,Ii),e(gt,xo),e(xo,Ri),e(gt,Pi),e(w,Ci),e(w,So),e(So,Mi),e(w,Di),e(w,_t),e(_t,Wi),e(_t,Et),e(Et,Oi),e(_t,Fi),e(w,Li),e(w,mn),mn.innerHTML=tf,e(w,ji),e(w,Ao),e(Ao,zi),e(w,Gi),e(w,Tt),e(Tt,Ni),e(Tt,xt),e(xt,Hi),e(Tt,Bi),e(w,Yi),e(w,fn),e(fn,St),e(w,Ui),e(w,Io),e(Io,Ji),e(w,qi),e(w,Ro),e(Ro,Xi),e(w,Vi),e(w,wn),wn.innerHTML=nf,e(w,$i),e(w,Po),e(Po,Co),e(Co,Ki),e(w,Zi),e(w,Mo),e(Mo,Qi),e(w,ec),e(w,Do),e(Do,ac),e(w,sc),e(w,Wo),e(Wo,bn),e(w,tc),e(w,yn),e(yn,nc),e(yn,At),e(At,oc),e(w,pc),e(w,Ps),e(Ps,lc),e(Ps,It),e(It,rc),e(Ps,ic),e(Ps,Rt),e(Rt,cc),e(Ps,uc),e(w,hc),e(w,Cs),e(Cs,dc),e(Cs,Pt),e(Pt,kc),e(Cs,mc),e(Cs,Ct),e(Ct,fc),e(Cs,wc),e(w,bc),e(w,Oo),e(Oo,yc),e(w,vc),e(w,vn),vn.innerHTML=of,e(w,gc),e(w,Fo),e(Fo,_c),e(w,Ec),e(w,Lo),e(Lo,Tc),e(w,xc),e(w,Ms),e(Ms,Sc),e(Ms,jo),e(jo,Ac),e(Ms,Ic),e(Ms,zo),e(zo,Rc),e(Ms,Pc),e(w,Cc),e(w,Mt),e(Mt,Mc),e(Mt,Dt),e(Dt,Dc),e(Mt,Wc),e(w,Oc),e(w,gn),gn.innerHTML=pf,e(w,Fc),e(w,Go),e(Go,Lc),e(w,jc),e(w,Ds),e(Ds,zc),e(Ds,Wt),e(Wt,Gc),e(Ds,Nc),e(Ds,Ot),e(Ot,Hc),e(Ds,Bc),e(w,Yc),e(w,No),e(No,Uc),e(w,Jc),e(w,Ho),e(Ho,Bo),e(Bo,qc),r(s,qp,m),r(s,Xp,m),r(s,Vp,m),r(s,$p,m),r(s,Kp,m),r(s,_n,m),e(_n,Xc),r(s,Zp,m),r(s,En,m),e(En,Vc),r(s,Qp,m),r(s,qs,m),e(qs,Yo),e(Yo,Ws),e(Ws,Uo),e(Uo,$c),e(Ws,Kc),e(Ws,Jo),e(Jo,Zc),e(Ws,Qc),e(Ws,qo),e(qo,eu),e(qs,au),e(qs,qe),e(qe,Os),e(Os,Xo),e(Xo,su),e(Os,tu),e(Os,Vo),e(Vo,nu),e(Os,ou),e(Os,$o),e($o,pu),e(qe,lu),e(qe,Fs),e(Fs,Ko),e(Ko,ru),e(Fs,iu),e(Fs,Zo),e(Zo,cu),e(Fs,uu),e(Fs,Qo),e(Qo,hu),e(qe,du),e(qe,Ls),e(Ls,ep),e(ep,ku),e(Ls,mu),e(Ls,ap),e(ap,fu),e(Ls,wu),e(Ls,sp),e(sp,bu),e(qe,yu),e(qe,js),e(js,tp),e(tp,vu),e(js,gu),e(js,np),e(np,_u),e(js,Eu),e(js,op),e(op,Tu),e(qe,xu),e(qe,zs),e(zs,pp),e(pp,Su),e(zs,Au),e(zs,lp),e(lp,Iu),e(zs,Ru),e(zs,rp),e(rp,Pu),e(qe,Cu),e(qe,Gs),e(Gs,ip),e(ip,Mu),e(Gs,Du),e(Gs,cp),e(cp,Wu),e(Gs,Ou),e(Gs,up),e(up,Fu),e(qe,Lu),e(qe,Ns),e(Ns,hp),e(hp,ju),e(Ns,zu),e(Ns,dp),e(dp,Gu),e(Ns,Nu),e(Ns,kp),e(kp,Hu),e(qe,Bu),e(qe,Hs),e(Hs,mp),e(mp,Yu),e(Hs,Uu),e(Hs,fp),e(fp,Ju),e(Hs,qu),e(Hs,wp),e(wp,Xu),r(s,el,m),r(s,Tn,m),e(Tn,bp),e(bp,Vu),r(s,al,m),r(s,Xs,m),e(Xs,$u),e(Xs,yp),e(yp,Ku),e(Xs,Zu),r(s,sl,m),r(s,xn,m),e(xn,Qu),r(s,tl,m),r(s,Vs,m),e(Vs,eh),e(Vs,vp),e(vp,ah),e(Vs,sh),r(s,nl,m),r(s,Ft,m),e(Ft,th),e(Ft,gp),e(gp,nh),r(s,ol,m),r(s,Sn,m),e(Sn,_p),e(_p,oh),r(s,pl,m),r(s,$s,m),e($s,ph),e($s,Lt),e(Lt,lh),e($s,rh),r(s,ll,m),r(s,rl,m),r(s,il,m),r(s,An,m),e(An,ih),r(s,cl,m),r(s,Ks,m),e(Ks,ch),e(Ks,Ep),e(Ep,uh),e(Ks,hh),r(s,ul,m),r(s,Zs,m),e(Zs,dh),e(Zs,Tp),e(Tp,kh),e(Zs,mh),r(s,hl,m),r(s,In,m),e(In,fh),r(s,dl,m),r(s,Rn,m),e(Rn,xp),e(xp,wh),r(s,kl,m),r(s,ml,m),r(s,fl,m),r(s,Pn,m),e(Pn,bh),r(s,wl,m),r(s,jt,m),e(jt,yh),e(jt,zt),e(zt,vh),r(s,bl,m),r(s,Gt,m),e(Gt,gh),e(Gt,Nt),e(Nt,_h),r(s,yl,m),r(s,Ht,m),e(Ht,Eh),e(Ht,Bt),e(Bt,Th),r(s,vl,m),r(s,Yt,m),e(Yt,xh),e(Yt,Ut),e(Ut,Sh),r(s,gl,m),r(s,Jt,m),e(Jt,Ah),e(Jt,qt),e(qt,Ih),r(s,_l,m),r(s,Xt,m),e(Xt,Rh),e(Xt,Vt),e(Vt,Ph),r(s,El,m),r(s,Cn,m),e(Cn,Sp),e(Sp,Ch),Tl=!0},p:as,i(s){Tl||(qm(P.$$.fragment,s),qm(_e.$$.fragment,s),Tl=!0)},o(s){Xm(P.$$.fragment,s),Xm(_e.$$.fragment,s),Tl=!1},d(s){s&&a(g),s&&a(x),s&&a(E),s&&a(S),s&&a(ue),s&&a(aa),s&&a(O),s&&a(B),s&&a(he),s&&a(ge),s&&a(F),Vm(P),Vm(_e),s&&a(J),s&&a(ne),s&&a(ha),s&&a(q),s&&a(Oe),s&&a(Te),s&&a(ae),s&&a(ke),s&&a(xe),s&&a(se),s&&a(we),s&&a(M),s&&a(ka),s&&a(Y),s&&a(oa),s&&a(le),s&&a(K),s&&a(U),s&&a(pa),s&&a(Z),s&&a(Ge),s&&a(ie),s&&a(y),s&&a(W),s&&a(Pe),s&&a(xa),s&&a(z),s&&a(Ze),s&&a(ia),s&&a(Je),s&&a(Oa),s&&a(_),s&&a($a),s&&a(at),s&&a(st),s&&a(tt),s&&a(nt),s&&a(Qe),s&&a(ot),s&&a(G),s&&a(Mp),s&&a(Dp),s&&a(Wp),s&&a(Op),s&&a(rn),s&&a(Fp),s&&a(Lp),s&&a(jp),s&&a(zp),s&&a(dt),s&&a(Gp),s&&a(T),s&&a(Np),s&&a(Hp),s&&a(Bp),s&&a(Yp),s&&a(Up),s&&a(vt),s&&a(Jp),s&&a(w),s&&a(qp),s&&a(Xp),s&&a(Vp),s&&a($p),s&&a(Kp),s&&a(_n),s&&a(Zp),s&&a(En),s&&a(Qp),s&&a(qs),s&&a(el),s&&a(Tn),s&&a(al),s&&a(Xs),s&&a(sl),s&&a(xn),s&&a(tl),s&&a(Vs),s&&a(nl),s&&a(Ft),s&&a(ol),s&&a(Sn),s&&a(pl),s&&a($s),s&&a(ll),s&&a(rl),s&&a(il),s&&a(An),s&&a(cl),s&&a(Ks),s&&a(ul),s&&a(Zs),s&&a(hl),s&&a(In),s&&a(dl),s&&a(Rn),s&&a(kl),s&&a(ml),s&&a(fl),s&&a(Pn),s&&a(wl),s&&a(jt),s&&a(bl),s&&a(Gt),s&&a(yl),s&&a(Ht),s&&a(vl),s&&a(Yt),s&&a(gl),s&&a(Jt),s&&a(_l),s&&a(Xt),s&&a(El),s&&a(Cn)}}}const Km={slug:"1-mandel",title:"One of the Fastest Web Mandelbrot Renderers",date:"2021-06-21T00:00:00.000Z",summary:"Our initial experiments rendering the Mandelbrot set with JavaScript, Web-workers & emerging web technologies like webassembly.",thumbnail:"/blog-1-mandel-thumbnail.webp",tags:["Engineering"],author:"Ojasvin Kirpane, Abhishek Cherath, Jo Gao & Abhinuv Allu"},{slug:Jf,title:qf,date:Xf,summary:Vf,thumbnail:$f,tags:Kf,author:Zm}=Km;let Cf="z_{0}=0",Mf="z*{n+1}=z_n^2+c";function Df(ua){return console.log("a"),[]}class Wf extends Rp{constructor(g){super();Pp(this,g,Df,Pf,Cp,{})}}var Zf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wf,metadata:Km});function Of(ua){let g,R,N,x,E,C,S,ue,Xe,D,ea,va,te,H,Me,aa,O,De,B,he,Ve,ge,F,sa,P,ta,_e,Ee,J,ne,Q,oe,ha,q,de,We,$e,X,Oe,Te,ee,ae,ke,V,me,Fe,fe,Le,pe,xe,se,da,we,M,na,ka,Y,$,be,oa,le,ga,K,U,ma,L,je,Se,pa,Z,Ae,Ie,ze,re,Ge,ie,k,y,W=`<code class="language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// beginning of main function</span>

	<span class="token comment">// setting up EmscriptenWebGLContextAttributes</span>
	EmscriptenWebGLContextAttributes attr<span class="token punctuation">;</span>
	<span class="token function">emscripten_webgl_init_context_attributes</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	attr<span class="token punctuation">.</span>alpha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">// target the canvas selector</span>
	EMSCRIPTEN_WEBGL_CONTEXT_HANDLE ctx <span class="token operator">=</span> <span class="token function">emscripten_webgl_create_context</span><span class="token punctuation">(</span><span class="token string">"#canvas"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">emscripten_webgl_make_context_current</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,Re,Ne,_a,ye,Ea,Ta,ce,j,Ca,He,la,Ma,Be,ra,Da,Ye,Ke,Wa,Ue,ve,Pe,xa,z,Ze,ia,Je,fa,Sa,Na,Oa,_,Ha,Ka,wa,Aa,ss,u,f,ca,us,Fa,ts,hs,Ba,Ya,ds,La,ns,Ua,Za,os,Ja,qa,Ia,Xa,ja,ps;return{c(){g=t("div"),R=t("img"),x=i(),E=t("p"),C=p("The following article is something of a hybrid between the first "),S=t("a"),ue=p("Emscripten tutorial"),Xe=p(" and the "),D=t("a"),ea=p("Getting Started with WebGL tutorial"),va=p(". It builds on the previous documentation to demonstrate how to render the same content in the WebGL tutorial, but in C."),te=i(),H=t("p"),Me=p("This is not an Introduction to C programming or WebGL, so a basic understanding of both will be helpful. If you are new to WebGL, I would recommend at least skimming the Getting Started with WebGL tutorial linked above."),aa=i(),O=t("p"),De=p("The focus of this article is to illustrate the bare minimum required to get WebGL up and running in C with the Emscripten compiler. And thus, if you do not yet have Emscripten installed, I would suggest doing so now from their "),B=t("a"),he=p("download page"),Ve=p("."),ge=i(),F=t("p"),sa=p("The Github repo for this tutorial is available on our "),P=t("a"),ta=p("Github"),_e=p("."),Ee=i(),J=t("h2"),ne=p("HTML File"),Q=i(),oe=t("p"),ha=p("The following is a barebones HTML file with a canvas element. The "),q=t("code"),de=p("index.js"),We=p(" script after the canvas is the file that will be generated from compiling the C code."),$e=i(),X=t("pre"),Oe=t("code"),Te=p(`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<canvas id="canvas" height="400px" width="400px"></canvas>
		<script src="index.js"><\/script>
	</body>
</html>
<h1>This is a header</h1>`),ee=i(),ae=t("h2"),ke=p("Header Files"),V=i(),me=t("pre"),Fe=t("code"),fe=p(`#include <emscripten/html5.h>
#include <GLES2/gl2.h>`),Le=i(),pe=t("p"),xe=p("The html5 header provides the bindings required to use html elements and events from native code. For this tutorial, it will allow us to set up the WebGL context in C. You can view the full documentation for "),se=t("code"),da=p("emscripten/html.5.h"),we=i(),M=t("a"),na=p("here"),ka=i(),Y=t("p"),$=p("The gl2 header provides the functions to draw and interact with the canvas context. The entire header file can be found "),be=t("a"),oa=p("here"),le=p("."),ga=i(),K=t("h2"),U=p("Setting up the Canvas"),ma=i(),L=t("p"),je=p("Before we can begin drawing, we must first obtain a canvas context. The html5 header file provides the functions needed to do this. To create a canvas context, the "),Se=t("code"),pa=p("emscripten_webgl_create_context"),Z=p(" function takes a target and an "),Ae=t("code"),Ie=p("EmscriptenWebGLContextAttributes"),ze=p(" object, used to specify various attributes for the context. A complete list of the object\u2019s attributes can be found "),re=t("a"),Ge=p("here"),ie=p("."),k=i(),y=t("pre"),Re=i(),Ne=t("p"),_a=p("At the start of the main function, we create and initialize the "),ye=t("code"),Ea=p("EmscriptenWebGLContextAttributes"),Ta=p(" object with all the default attributes settings except the alpha attribute, which is set to false. This is done mostly for the purpose of illustrating how to set specific attributes."),ce=i(),j=t("p"),Ca=p("The "),He=t("code"),la=p("emscripten_webgl_create_context"),Ma=p(" function targets, "),Be=t("code"),ra=p("#canvas"),Da=p(", the selector for the canvas element in the html file. After creating the context, we must activate it using "),Ye=t("code"),Ke=p("emscripten_webgl_make_context_current"),Wa=p(", to specify that all following GL calls will be applied to that context."),Ue=i(),ve=t("h2"),Pe=p("Drawing to the Canvas"),xa=i(),z=t("p"),Ze=p("In JavaScript, we would use "),ia=t("code"),Je=p("clearColor"),fa=p(" and "),Sa=t("code"),Na=p("clear"),Oa=p(" on the canvas context to fill in the canvas. The equivalents of these methods are provided by the gl2 header as "),_=t("code"),Ha=p("glClearColor"),Ka=p(" and "),wa=t("code"),Aa=p("glClear"),ss=p("."),u=i(),f=t("pre"),ca=t("code"),us=p(`// this goes after you have activated the webgl context
	glClearColor(0.984, 0.4627, 0.502, 1.0);
	glClear(GL_COLOR_BUFFER_BIT);
	return 1;
} // end of main function`),Fa=i(),ts=t("h2"),hs=p("Compiling and Running"),Ba=i(),Ya=t("p"),ds=p("To compile with Emscripten, run the following command. This will output the index.js file that is sourced from the html file."),La=i(),ns=t("pre"),Ua=t("code"),Za=p("emcc main.c -o index.js"),os=i(),Ja=t("p"),qa=p("The html file can now be opened and viewed in a browser. Huzzah!"),Ia=i(),Xa=t("div"),ja=t("img"),this.h()},l(h){g=n(h,"DIV",{align:!0});var v=o(g);R=n(v,"IMG",{style:!0,src:!0,alt:!0}),v.forEach(a),x=c(h),E=n(h,"P",{});var Ra=o(E);C=l(Ra,"The following article is something of a hybrid between the first "),S=n(Ra,"A",{href:!0,rel:!0});var ws=o(S);ue=l(ws,"Emscripten tutorial"),ws.forEach(a),Xe=l(Ra," and the "),D=n(Ra,"A",{href:!0,rel:!0});var bs=o(D);ea=l(bs,"Getting Started with WebGL tutorial"),bs.forEach(a),va=l(Ra,". It builds on the previous documentation to demonstrate how to render the same content in the WebGL tutorial, but in C."),Ra.forEach(a),te=c(h),H=n(h,"P",{});var Qa=o(H);Me=l(Qa,"This is not an Introduction to C programming or WebGL, so a basic understanding of both will be helpful. If you are new to WebGL, I would recommend at least skimming the Getting Started with WebGL tutorial linked above."),Qa.forEach(a),aa=c(h),O=n(h,"P",{});var ys=o(O);De=l(ys,"The focus of this article is to illustrate the bare minimum required to get WebGL up and running in C with the Emscripten compiler. And thus, if you do not yet have Emscripten installed, I would suggest doing so now from their "),B=n(ys,"A",{href:!0,rel:!0});var vs=o(B);he=l(vs,"download page"),vs.forEach(a),Ve=l(ys,"."),ys.forEach(a),ge=c(h),F=n(h,"P",{});var za=o(F);sa=l(za,"The Github repo for this tutorial is available on our "),P=n(za,"A",{href:!0,rel:!0});var et=o(P);ta=l(et,"Github"),et.forEach(a),_e=l(za,"."),za.forEach(a),Ee=c(h),J=n(h,"H2",{});var gs=o(J);ne=l(gs,"HTML File"),gs.forEach(a),Q=c(h),oe=n(h,"P",{});var Va=o(oe);ha=l(Va,"The following is a barebones HTML file with a canvas element. The "),q=n(Va,"CODE",{});var _s=o(q);de=l(_s,"index.js"),_s.forEach(a),We=l(Va," script after the canvas is the file that will be generated from compiling the C code."),Va.forEach(a),$e=c(h),X=n(h,"PRE",{});var ls=o(X);Oe=n(ls,"CODE",{class:!0});var rs=o(Oe);Te=l(rs,`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<canvas id="canvas" height="400px" width="400px"></canvas>
		<script src="index.js"><\/script>
	</body>
</html>
<h1>This is a header</h1>`),rs.forEach(a),ls.forEach(a),ee=c(h),ae=n(h,"H2",{});var Es=o(ae);ke=l(Es,"Header Files"),Es.forEach(a),V=c(h),me=n(h,"PRE",{});var Ts=o(me);Fe=n(Ts,"CODE",{class:!0});var is=o(Fe);fe=l(is,`#include <emscripten/html5.h>
#include <GLES2/gl2.h>`),is.forEach(a),Ts.forEach(a),Le=c(h),pe=n(h,"P",{});var xs=o(pe);xe=l(xs,"The html5 header provides the bindings required to use html elements and events from native code. For this tutorial, it will allow us to set up the WebGL context in C. You can view the full documentation for "),se=n(xs,"CODE",{});var $t=o(se);da=l($t,"emscripten/html.5.h"),$t.forEach(a),we=c(xs),M=n(xs,"A",{href:!0,rel:!0});var Ss=o(M);na=l(Ss,"here"),Ss.forEach(a),xs.forEach(a),ka=c(h),Y=n(h,"P",{});var Kt=o(Y);$=l(Kt,"The gl2 header provides the functions to draw and interact with the canvas context. The entire header file can be found "),be=n(Kt,"A",{href:!0,rel:!0});var Zt=o(be);oa=l(Zt,"here"),Zt.forEach(a),le=l(Kt,"."),Kt.forEach(a),ga=c(h),K=n(h,"H2",{});var As=o(K);U=l(As,"Setting up the Canvas"),As.forEach(a),ma=c(h),L=n(h,"P",{});var ks=o(L);je=l(ks,"Before we can begin drawing, we must first obtain a canvas context. The html5 header file provides the functions needed to do this. To create a canvas context, the "),Se=n(ks,"CODE",{});var Qt=o(Se);pa=l(Qt,"emscripten_webgl_create_context"),Qt.forEach(a),Z=l(ks," function takes a target and an "),Ae=n(ks,"CODE",{});var ms=o(Ae);Ie=l(ms,"EmscriptenWebGLContextAttributes"),ms.forEach(a),ze=l(ks," object, used to specify various attributes for the context. A complete list of the object\u2019s attributes can be found "),re=n(ks,"A",{href:!0,rel:!0});var en=o(re);Ge=l(en,"here"),en.forEach(a),ie=l(ks,"."),ks.forEach(a),k=c(h),y=n(h,"PRE",{class:!0});var Is=o(y);Is.forEach(a),Re=c(h),Ne=n(h,"P",{});var Bs=o(Ne);_a=l(Bs,"At the start of the main function, we create and initialize the "),ye=n(Bs,"CODE",{});var an=o(ye);Ea=l(an,"EmscriptenWebGLContextAttributes"),an.forEach(a),Ta=l(Bs," object with all the default attributes settings except the alpha attribute, which is set to false. This is done mostly for the purpose of illustrating how to set specific attributes."),Bs.forEach(a),ce=c(h),j=n(h,"P",{});var $a=o(j);Ca=l($a,"The "),He=n($a,"CODE",{});var at=o(He);la=l(at,"emscripten_webgl_create_context"),at.forEach(a),Ma=l($a," function targets, "),Be=n($a,"CODE",{});var st=o(Be);ra=l(st,"#canvas"),st.forEach(a),Da=l($a,", the selector for the canvas element in the html file. After creating the context, we must activate it using "),Ye=n($a,"CODE",{});var tt=o(Ye);Ke=l(tt,"emscripten_webgl_make_context_current"),tt.forEach(a),Wa=l($a,", to specify that all following GL calls will be applied to that context."),$a.forEach(a),Ue=c(h),ve=n(h,"H2",{});var nt=o(ve);Pe=l(nt,"Drawing to the Canvas"),nt.forEach(a),xa=c(h),z=n(h,"P",{});var Qe=o(z);Ze=l(Qe,"In JavaScript, we would use "),ia=n(Qe,"CODE",{});var sn=o(ia);Je=l(sn,"clearColor"),sn.forEach(a),fa=l(Qe," and "),Sa=n(Qe,"CODE",{});var Ys=o(Sa);Na=l(Ys,"clear"),Ys.forEach(a),Oa=l(Qe," on the canvas context to fill in the canvas. The equivalents of these methods are provided by the gl2 header as "),_=n(Qe,"CODE",{});var tn=o(_);Ha=l(tn,"glClearColor"),tn.forEach(a),Ka=l(Qe," and "),wa=n(Qe,"CODE",{});var ot=o(wa);Aa=l(ot,"glClear"),ot.forEach(a),ss=l(Qe,"."),Qe.forEach(a),u=c(h),f=n(h,"PRE",{});var G=o(f);ca=n(G,"CODE",{class:!0});var Us=o(ca);us=l(Us,`// this goes after you have activated the webgl context
	glClearColor(0.984, 0.4627, 0.502, 1.0);
	glClear(GL_COLOR_BUFFER_BIT);
	return 1;
} // end of main function`),Us.forEach(a),G.forEach(a),Fa=c(h),ts=n(h,"H2",{});var nn=o(ts);hs=l(nn,"Compiling and Running"),nn.forEach(a),Ba=c(h),Ya=n(h,"P",{});var on=o(Ya);ds=l(on,"To compile with Emscripten, run the following command. This will output the index.js file that is sourced from the html file."),on.forEach(a),La=c(h),ns=n(h,"PRE",{});var es=o(ns);Ua=n(es,"CODE",{class:!0});var pn=o(Ua);Za=l(pn,"emcc main.c -o index.js"),pn.forEach(a),es.forEach(a),os=c(h),Ja=n(h,"P",{});var fs=o(Ja);qa=l(fs,"The html file can now be opened and viewed in a browser. Huzzah!"),fs.forEach(a),Ia=c(h),Xa=n(h,"DIV",{align:!0});var ln=o(Xa);ja=n(ln,"IMG",{style:!0,src:!0,alt:!0}),ln.forEach(a),this.h()},h(){Pa(R,"width","100%"),ya(R.src,N="/blog-2-tri-thumbnail.webp")||d(R,"src",N),d(R,"alt","Thumbnail"),d(g,"align","center"),d(S,"href","https://emscripten.org/docs/getting_started/Tutorial.html"),d(S,"rel","nofollow"),d(D,"href","https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL"),d(D,"rel","nofollow"),d(B,"href","https://emscripten.org/docs/getting_started/downloads.html"),d(B,"rel","nofollow"),d(P,"href","https://github.com/AO-Design-Inc/webGL-with-emscripten"),d(P,"rel","nofollow"),d(Oe,"class","language-html"),d(Fe,"class","language-c"),d(M,"href","https://emscripten.org/docs/api_reference/html5.h.html"),d(M,"rel","nofollow"),d(be,"href","https://www.khronos.org/registry/OpenGL/api/GLES2/gl2.h"),d(be,"rel","nofollow"),d(re,"href","https://emscripten.org/docs/api_reference/html5.h.html#c.EmscriptenWebGLContextAttributes"),d(re,"rel","nofollow"),d(y,"class","language-c"),d(ca,"class","language-c"),d(Ua,"class","language-bash"),Pa(ja,"width","100%"),ya(ja.src,ps="/blog-2-tri-final.jpg")||d(ja,"src",ps),d(ja,"alt","Final"),d(Xa,"align","center")},m(h,v){r(h,g,v),e(g,R),r(h,x,v),r(h,E,v),e(E,C),e(E,S),e(S,ue),e(E,Xe),e(E,D),e(D,ea),e(E,va),r(h,te,v),r(h,H,v),e(H,Me),r(h,aa,v),r(h,O,v),e(O,De),e(O,B),e(B,he),e(O,Ve),r(h,ge,v),r(h,F,v),e(F,sa),e(F,P),e(P,ta),e(F,_e),r(h,Ee,v),r(h,J,v),e(J,ne),r(h,Q,v),r(h,oe,v),e(oe,ha),e(oe,q),e(q,de),e(oe,We),r(h,$e,v),r(h,X,v),e(X,Oe),e(Oe,Te),r(h,ee,v),r(h,ae,v),e(ae,ke),r(h,V,v),r(h,me,v),e(me,Fe),e(Fe,fe),r(h,Le,v),r(h,pe,v),e(pe,xe),e(pe,se),e(se,da),e(pe,we),e(pe,M),e(M,na),r(h,ka,v),r(h,Y,v),e(Y,$),e(Y,be),e(be,oa),e(Y,le),r(h,ga,v),r(h,K,v),e(K,U),r(h,ma,v),r(h,L,v),e(L,je),e(L,Se),e(Se,pa),e(L,Z),e(L,Ae),e(Ae,Ie),e(L,ze),e(L,re),e(re,Ge),e(L,ie),r(h,k,v),r(h,y,v),y.innerHTML=W,r(h,Re,v),r(h,Ne,v),e(Ne,_a),e(Ne,ye),e(ye,Ea),e(Ne,Ta),r(h,ce,v),r(h,j,v),e(j,Ca),e(j,He),e(He,la),e(j,Ma),e(j,Be),e(Be,ra),e(j,Da),e(j,Ye),e(Ye,Ke),e(j,Wa),r(h,Ue,v),r(h,ve,v),e(ve,Pe),r(h,xa,v),r(h,z,v),e(z,Ze),e(z,ia),e(ia,Je),e(z,fa),e(z,Sa),e(Sa,Na),e(z,Oa),e(z,_),e(_,Ha),e(z,Ka),e(z,wa),e(wa,Aa),e(z,ss),r(h,u,v),r(h,f,v),e(f,ca),e(ca,us),r(h,Fa,v),r(h,ts,v),e(ts,hs),r(h,Ba,v),r(h,Ya,v),e(Ya,ds),r(h,La,v),r(h,ns,v),e(ns,Ua),e(Ua,Za),r(h,os,v),r(h,Ja,v),e(Ja,qa),r(h,Ia,v),r(h,Xa,v),e(Xa,ja)},p:as,i:as,o:as,d(h){h&&a(g),h&&a(x),h&&a(E),h&&a(te),h&&a(H),h&&a(aa),h&&a(O),h&&a(ge),h&&a(F),h&&a(Ee),h&&a(J),h&&a(Q),h&&a(oe),h&&a($e),h&&a(X),h&&a(ee),h&&a(ae),h&&a(V),h&&a(me),h&&a(Le),h&&a(pe),h&&a(ka),h&&a(Y),h&&a(ga),h&&a(K),h&&a(ma),h&&a(L),h&&a(k),h&&a(y),h&&a(Re),h&&a(Ne),h&&a(ce),h&&a(j),h&&a(Ue),h&&a(ve),h&&a(xa),h&&a(z),h&&a(u),h&&a(f),h&&a(Fa),h&&a(ts),h&&a(Ba),h&&a(Ya),h&&a(La),h&&a(ns),h&&a(os),h&&a(Ja),h&&a(Ia),h&&a(Xa)}}}const Ff={slug:"2-webgl",title:"WebGL with Emscripten: The Bare Minimum",date:"2021-08-03T00:00:00.000Z",summary:"Illustrating the bare minimum required to get WebGL up and running in C with the Emscripten compiler.",thumbnail:"/blog-2-tri-thumbnail.webp",tags:["Engineering"],author:"Jo Gao"};function Lf(ua){return console.log("a"),[]}class jf extends Rp{constructor(g){super();Pp(this,g,Lf,Of,Cp,{})}}var Qf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jf,metadata:Ff});function zf(ua){let g,R,N,x,E,C,S,ue,Xe,D,ea,va,te,H,Me,aa,O,De,B,he,Ve,ge,F,sa,P,ta,_e,Ee,J,ne,Q,oe,ha,q,de,We,$e,X,Oe,Te,ee,ae,ke,V,me,Fe,fe,Le,pe,xe,se,da,we,M,na,ka,Y,$,be,oa,le,ga,K,U,ma,L,je,Se,pa,Z,Ae,Ie,ze,re,Ge,ie;return{c(){g=t("p"),R=p("2021 has been an exciting year for Feather."),N=i(),x=t("p"),E=p("We\u2019ve made massive strides towards reaching feature parity with key players in our field, expanded our team, and have plans for even more in 2022 (including a public launch!)."),C=i(),S=t("iframe"),Xe=i(),D=t("p"),ea=t("em"),va=p("P.S. Stay tuned until the end of the video Progress Report to view a demo of Feather in action through long distances (Atlanta \u2192 New York)."),te=i(),H=t("h2"),Me=p("Progress So Far"),aa=i(),O=t("p"),De=p("Over the past year we\u2019ve done a lot to rapidly build up a prototype, and have finally reached a point where we\u2019ve been using it on your own workflows."),B=i(),he=t("p"),Ve=t("strong"),ge=p("Remote Desktop:"),F=p(" FeatherStream currently allows users to access their full desktop remotely from any other PC utilizing webRTC."),sa=i(),P=t("p"),ta=t("strong"),_e=p("Cross OS Support:"),Ee=p(" We have successfully configured CI for this project to automatically give us Linux, Windows, and MacOS builds for testing."),J=i(),ne=t("p"),Q=t("strong"),oe=p("Multi-Server Support:"),ha=p(" To prepare for future plans in load balancing, FeatherStream allows you to set up and connect to multiple servers from the same client device, seamlessly across multiple devices and vice versa."),q=i(),de=t("p"),We=p("All of this has brought Feather up to speed with other remote desktop solutions in months, building the core of our future innovations."),$e=i(),X=t("h2"),Oe=p("The Feather Vision"),Te=i(),ee=t("p"),ae=p("Feather isn\u2019t simply a Remote Desktop. In fact, we looked at the clunky existing remote desktop and VDI infrastructure and found it unusable. It\u2019s not their fault. The fact is that simply streaming the entire desktop as a video can never feel like you\u2019re natively browsing windows on your machine."),ke=i(),V=t("p"),me=p("Feather isn\u2019t a Remote Desktop because it\u2019s a way for you to transform your home PC into a router for processing power itself. Anyone connected to your local Wi-Fi network should be able to accelerate the processing power they have available on the weakest of devices. Connecting to another machine should feel as smooth as running an app on your own device\u2026 and making these connections should be as simple and easily understood as connecting to Wi-Fi itself."),Fe=i(),fe=t("h2"),Le=p("Looking Forward"),pe=i(),xe=t("p"),se=p("We\u2019re a little ambitious, and it won\u2019t be easy. This year, we have a few steps planned to achieve our vision."),da=i(),we=t("p"),M=t("strong"),na=p("Individual Windows"),ka=p(": Moving forward, we will implement application-level video streaming so users can access specific programs remotely. Users will be able to use different applications with a near-native experience."),Y=i(),$=t("p"),be=t("strong"),oa=p("Cross-Platform Files:"),le=p(" We will add a shared clipboard mechanism so users can copy and paste between their local and remote devices without problems. We will be setting up a file system view for users to be able to access both local and remote files and a way to transfer and share files between devices."),ga=i(),K=t("p"),U=t("strong"),ma=p("Alpha Testing:"),L=p(" We will continue to improve and develop our testing framework to start multiple instances of FeatherStream and help us release more robust versions of this product."),je=i(),Se=t("p"),pa=p("If you\u2019re interested in being the first to hear about how we\u2019re changing remote access, make sure to subscribe to the Feather newsletter."),Z=i(),Ae=t("p"),Ie=p("It has been an exciting year as we begin to gear up to bring Feather into the public eye. Lots have been celebrated, improved, and learned. We have exciting news planned for our next monthly update, so stay tuned to learn more because even we can\u2019t wait to see what comes next."),ze=i(),re=t("ul"),Ge=t("li"),ie=p("Feather Team"),this.h()},l(k){g=n(k,"P",{});var y=o(g);R=l(y,"2021 has been an exciting year for Feather."),y.forEach(a),N=c(k),x=n(k,"P",{});var W=o(x);E=l(W,"We\u2019ve made massive strides towards reaching feature parity with key players in our field, expanded our team, and have plans for even more in 2022 (including a public launch!)."),W.forEach(a),C=c(k),S=n(k,"IFRAME",{style:!0,width:!0,height:!0,src:!0,title:!0,frameborder:!0,allow:!0}),o(S).forEach(a),Xe=c(k),D=n(k,"P",{});var Re=o(D);ea=n(Re,"EM",{});var Ne=o(ea);va=l(Ne,"P.S. Stay tuned until the end of the video Progress Report to view a demo of Feather in action through long distances (Atlanta \u2192 New York)."),Ne.forEach(a),Re.forEach(a),te=c(k),H=n(k,"H2",{});var _a=o(H);Me=l(_a,"Progress So Far"),_a.forEach(a),aa=c(k),O=n(k,"P",{});var ye=o(O);De=l(ye,"Over the past year we\u2019ve done a lot to rapidly build up a prototype, and have finally reached a point where we\u2019ve been using it on your own workflows."),ye.forEach(a),B=c(k),he=n(k,"P",{});var Ea=o(he);Ve=n(Ea,"STRONG",{});var Ta=o(Ve);ge=l(Ta,"Remote Desktop:"),Ta.forEach(a),F=l(Ea," FeatherStream currently allows users to access their full desktop remotely from any other PC utilizing webRTC."),Ea.forEach(a),sa=c(k),P=n(k,"P",{});var ce=o(P);ta=n(ce,"STRONG",{});var j=o(ta);_e=l(j,"Cross OS Support:"),j.forEach(a),Ee=l(ce," We have successfully configured CI for this project to automatically give us Linux, Windows, and MacOS builds for testing."),ce.forEach(a),J=c(k),ne=n(k,"P",{});var Ca=o(ne);Q=n(Ca,"STRONG",{});var He=o(Q);oe=l(He,"Multi-Server Support:"),He.forEach(a),ha=l(Ca," To prepare for future plans in load balancing, FeatherStream allows you to set up and connect to multiple servers from the same client device, seamlessly across multiple devices and vice versa."),Ca.forEach(a),q=c(k),de=n(k,"P",{});var la=o(de);We=l(la,"All of this has brought Feather up to speed with other remote desktop solutions in months, building the core of our future innovations."),la.forEach(a),$e=c(k),X=n(k,"H2",{});var Ma=o(X);Oe=l(Ma,"The Feather Vision"),Ma.forEach(a),Te=c(k),ee=n(k,"P",{});var Be=o(ee);ae=l(Be,"Feather isn\u2019t simply a Remote Desktop. In fact, we looked at the clunky existing remote desktop and VDI infrastructure and found it unusable. It\u2019s not their fault. The fact is that simply streaming the entire desktop as a video can never feel like you\u2019re natively browsing windows on your machine."),Be.forEach(a),ke=c(k),V=n(k,"P",{});var ra=o(V);me=l(ra,"Feather isn\u2019t a Remote Desktop because it\u2019s a way for you to transform your home PC into a router for processing power itself. Anyone connected to your local Wi-Fi network should be able to accelerate the processing power they have available on the weakest of devices. Connecting to another machine should feel as smooth as running an app on your own device\u2026 and making these connections should be as simple and easily understood as connecting to Wi-Fi itself."),ra.forEach(a),Fe=c(k),fe=n(k,"H2",{});var Da=o(fe);Le=l(Da,"Looking Forward"),Da.forEach(a),pe=c(k),xe=n(k,"P",{});var Ye=o(xe);se=l(Ye,"We\u2019re a little ambitious, and it won\u2019t be easy. This year, we have a few steps planned to achieve our vision."),Ye.forEach(a),da=c(k),we=n(k,"P",{});var Ke=o(we);M=n(Ke,"STRONG",{});var Wa=o(M);na=l(Wa,"Individual Windows"),Wa.forEach(a),ka=l(Ke,": Moving forward, we will implement application-level video streaming so users can access specific programs remotely. Users will be able to use different applications with a near-native experience."),Ke.forEach(a),Y=c(k),$=n(k,"P",{});var Ue=o($);be=n(Ue,"STRONG",{});var ve=o(be);oa=l(ve,"Cross-Platform Files:"),ve.forEach(a),le=l(Ue," We will add a shared clipboard mechanism so users can copy and paste between their local and remote devices without problems. We will be setting up a file system view for users to be able to access both local and remote files and a way to transfer and share files between devices."),Ue.forEach(a),ga=c(k),K=n(k,"P",{});var Pe=o(K);U=n(Pe,"STRONG",{});var xa=o(U);ma=l(xa,"Alpha Testing:"),xa.forEach(a),L=l(Pe," We will continue to improve and develop our testing framework to start multiple instances of FeatherStream and help us release more robust versions of this product."),Pe.forEach(a),je=c(k),Se=n(k,"P",{});var z=o(Se);pa=l(z,"If you\u2019re interested in being the first to hear about how we\u2019re changing remote access, make sure to subscribe to the Feather newsletter."),z.forEach(a),Z=c(k),Ae=n(k,"P",{});var Ze=o(Ae);Ie=l(Ze,"It has been an exciting year as we begin to gear up to bring Feather into the public eye. Lots have been celebrated, improved, and learned. We have exciting news planned for our next monthly update, so stay tuned to learn more because even we can\u2019t wait to see what comes next."),Ze.forEach(a),ze=c(k),re=n(k,"UL",{});var ia=o(re);Ge=n(ia,"LI",{});var Je=o(Ge);ie=l(Je,"Feather Team"),Je.forEach(a),ia.forEach(a),this.h()},h(){Pa(S,"width","100%"),d(S,"width","560"),d(S,"height","315"),ya(S.src,ue="https://www.youtube.com/embed/zh7jbxOZipw")||d(S,"src",ue),d(S,"title","YouTube video player"),d(S,"frameborder","0"),d(S,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),S.allowFullscreen=!0},m(k,y){r(k,g,y),e(g,R),r(k,N,y),r(k,x,y),e(x,E),r(k,C,y),r(k,S,y),r(k,Xe,y),r(k,D,y),e(D,ea),e(ea,va),r(k,te,y),r(k,H,y),e(H,Me),r(k,aa,y),r(k,O,y),e(O,De),r(k,B,y),r(k,he,y),e(he,Ve),e(Ve,ge),e(he,F),r(k,sa,y),r(k,P,y),e(P,ta),e(ta,_e),e(P,Ee),r(k,J,y),r(k,ne,y),e(ne,Q),e(Q,oe),e(ne,ha),r(k,q,y),r(k,de,y),e(de,We),r(k,$e,y),r(k,X,y),e(X,Oe),r(k,Te,y),r(k,ee,y),e(ee,ae),r(k,ke,y),r(k,V,y),e(V,me),r(k,Fe,y),r(k,fe,y),e(fe,Le),r(k,pe,y),r(k,xe,y),e(xe,se),r(k,da,y),r(k,we,y),e(we,M),e(M,na),e(we,ka),r(k,Y,y),r(k,$,y),e($,be),e(be,oa),e($,le),r(k,ga,y),r(k,K,y),e(K,U),e(U,ma),e(K,L),r(k,je,y),r(k,Se,y),e(Se,pa),r(k,Z,y),r(k,Ae,y),e(Ae,Ie),r(k,ze,y),r(k,re,y),e(re,Ge),e(Ge,ie)},p:as,i:as,o:as,d(k){k&&a(g),k&&a(N),k&&a(x),k&&a(C),k&&a(S),k&&a(Xe),k&&a(D),k&&a(te),k&&a(H),k&&a(aa),k&&a(O),k&&a(B),k&&a(he),k&&a(sa),k&&a(P),k&&a(J),k&&a(ne),k&&a(q),k&&a(de),k&&a($e),k&&a(X),k&&a(Te),k&&a(ee),k&&a(ke),k&&a(V),k&&a(Fe),k&&a(fe),k&&a(pe),k&&a(xe),k&&a(da),k&&a(we),k&&a(Y),k&&a($),k&&a(ga),k&&a(K),k&&a(je),k&&a(Se),k&&a(Z),k&&a(Ae),k&&a(ze),k&&a(re)}}}const Gf={slug:"3-2021-in-Review",title:"Looking Back at 2021, Gearing For Launch",date:"2022-1-21",summary:"Over the past year we\u2019ve done a lot to rapidly build up a prototype, and have finally reached a point where we\u2019ve been using it on your own workflows.",thumbnail:"/blog-3-review-thumbnail.webp",tags:["Update","Engineering"],author:"Kyle Li, Jo Gao"};class Nf extends Rp{constructor(g){super();Pp(this,g,null,zf,Cp,{})}}var ew=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Nf,metadata:Gf});function Hf(ua){let g,R,N,x,E,C,S,ue,Xe,D,ea,va,te,H,Me,aa,O,De,B,he,Ve,ge,F,sa,P,ta,_e,Ee,J,ne,Q,oe,ha,q,de,We,$e,X,Oe,Te,ee,ae,ke,V,me,Fe,fe,Le,pe,xe,se,da,we,M,na,ka,Y,$,be,oa,le,ga,K,U,ma,L,je,Se,pa,Z,Ae,Ie,ze,re,Ge,ie,k,y,W,Re,Ne,_a,ye,Ea,Ta,ce,j,Ca,He,la,Ma,Be,ra,Da,Ye,Ke,Wa,Ue,ve,Pe,xa,z,Ze,ia,Je,fa,Sa,Na,Oa,_,Ha,Ka,wa,Aa,ss;return{c(){g=t("p"),R=p("Why would anyone want to remotely access their computer? In fact, lets ask this in another way: what do you gain from being able to use the processing power of a desktop PC, anywhere?"),N=i(),x=t("p"),E=p("The concept of computing began with massive computers - the size of rooms - purpose built for industrial applications. One of these firsts, the CDC 6600 was capable of performing over three million mathematical operations a second. Research and operations that once took hundreds of hours of "),C=t("em"),S=p("man-power"),ue=p(", now required only seconds of computer "),Xe=t("strong"),D=t("em"),ea=p("processing power"),va=p("."),te=i(),H=t("div"),Me=t("img"),O=i(),De=t("div"),B=t("img"),Ve=i(),ge=t("p"),F=p("In the decades following, we\u2019ve seen the rise of home computing, a shift towards ultraportable laptops, and the global takeover of smartphones. Now, with even the average household game console capable of over 10 trillion operations (10 TFlops), it\u2019s become clear that the future of computing is going portable. We\u2019re constantly seeking more processing power than ever before and in increasingly small packages. Toss in the growing awareness of owning personal data and information, a shift towards work at home culture, and you have to ask yourself\u2026 what don\u2019t you gain from accessing the resources of a powerful PC from any of your other devices?"),sa=i(),P=t("h3"),ta=p("Removing heat & noise from where you work & play?"),_e=i(),Ee=t("div"),J=t("img"),Q=i(),oe=t("p"),ha=p("A powerful computer turns a small room into a sauna in minutes. No matter if you\u2019re rendering the last few minutes of a short film or cranking out killstreaks in the latest FPS, running a PC generates heat which gets uncomfortable, fast. In fact the average high end system in a bedroom increases room temperatures by up to 5-10f above room temperature."),q=i(),de=t("p"),We=p("Where does remotely accessing your computer come into play? Well, what if we moved the source of the heat somewhere where it can\u2019t bother you? Places where the heat and noise don\u2019t matter as much. By remotely accessing your PC, you can have it run in a dedicated server room, a garage, or even your living room so the heat is out of sight and out of mind."),$e=i(),X=t("h3"),Oe=p("Accessing processing power from anywhere in your house?"),Te=i(),ee=t("div"),ae=t("img"),V=i(),me=t("p"),Fe=p("If you own a powerful PC already, why can\u2019t you access its resources from any device in your house? Leaving a noisy PC in a quiet home theater is just unacceptable, and you don\u2019t want to move your desktop around whenever you want it on a different screen."),fe=i(),Le=t("p"),pe=p("What if you could leave your PC connected to your home office, but still share the processing power around to your TV or laptop elsewhere? You can do the same work and access the same files as you would in your office or use your work PC to run games or enjoy entertainment from a central hub. You purchase one device for all."),xe=i(),se=t("h3"),da=p("Sharing a file, without ever needing to \u201Cshare\u201D the file?"),we=i(),M=t("div"),na=t("img"),Y=i(),$=t("p"),be=p("Sharing files is annoying. It\u2019s become easier than ever to link files for a detailed presentation, or to share an update with your coworkers. The easiest solution however, will always be to run the file natively, never having to move the file at all."),oa=i(),le=t("p"),ga=p("What if instead of having to plug your laptop into an HDMI projector, you\u2019re already ready to demo at all times? Instead of sending a file to yourself through email or uploading it on a USB stick to take home, you\u2019ve got access to the file on the computer you\u2019re already on because you\u2019ve never left it. With remote access, your files are already in a central location accessible just like your private cloud. Just log in, and you have your entire workspace ready and waiting all of the files already there as you left them."),K=i(),U=t("h2"),ma=p("What Does Feather Do Different?"),L=i(),je=t("p"),Se=p("The concept of remotely accessing a computer itself is not a novel idea. When you think about remotely access however, what are your options? A hardwire solution is permanent, expensive and complex. Remote desktops scale poorly, are complex to set up, and unsecure. Cloud servers have high latency, are prohibitively expensive, and lack user control."),pa=i(),Z=t("p"),Ae=p("Feather isn\u2019t in the business of being a remote desktop. Feather is built with the goal of providing freedom to how you access compute. Our goal is to enable anyone to turn their home PCs into home servers that load balance processing power across Wi-Fi. After all, why would you stream the text of a web page to a computer and have it end up blurry or try and drive complex games or render jobs on a weak laptop? If your device is better at rendering text and images, while a desktop PC is great at handling intensive processing like games and work, why not let the compute happen where it\u2019s best for it to happen? Our vision of Feather enables this and so much more."),Ie=i(),ze=t("h3"),re=p("Accelerating any Wi-Fi connected device"),Ge=i(),ie=t("div"),k=t("img"),W=i(),Re=t("p"),Ne=p("Traditional remote access software only allows you to share with similarly sized screens since all they do is record a desktop. Can you imagine trying to use a desktop UI on a smartphone or even a smartwatch? There\u2019s a reason mobile UI is designed the way it is. By splitting the processing power of each application, we can run applications natively on devices and only speed up the parts that need to be improved. Multiple clients can be load balanced across multiple servers at once, and you can accelerate the performance of an entire family\u2019s worth of Chromebooks with a single PC."),_a=i(),ye=t("h3"),Ea=p("Creating a processing power network"),Ta=i(),ce=t("div"),j=t("img"),He=i(),la=t("p"),Ma=p("Modern electricity grids load balance power across regions. When production is high in one region, the grid automatically sells power to high demand regions and vice versa. With the average user spending less than 10% of their time never utilizing their devices at peak processing, we waste massive amounts of not only money, but our global processing potential to fulfill rare peaks in our usage."),Be=i(),ra=t("p"),Da=p("What if instead of electricity, we could load balance processing power? If processing power can be anonymized, devices sitting at home can automatically assist neighborhood workplaces and research institutions on processor heavy tasks. In return, when you return home and run the latest triple A title, the now available workplace devices can share their processing with you. The more people on the network, the more processing power available to everyone at once. Together we can upgrade all the devices everyone has, everywhere."),Ye=i(),Ke=t("h3"),Wa=p("Public Wi-Fi nodes and feather light technology"),Ue=i(),ve=t("div"),Pe=t("img"),z=i(),Ze=t("p"),ia=p("We are more connected than ever before, and the implementation of 5G enables us to do more over the internet wherever we need to be. By setting up feather nodes in public spaces, we now not only are more connected everywhere, but can do more everywhere. Developers will have a completely new ecosystem of tools to develop around. Imagine smart drones with image recognition powered locally instead of requiring data being sent to servers on the cloud, smart clothing and glasses that can be as thin and small as a Wi-Fi receiver, or even feather light low cost devices with amazing interfaces at the fraction of the cost of a full device. Anyone will be able to develop on this platform, for this platform to enable things that were once never possible before."),Je=i(),fa=t("p"),Sa=p("So to answer the question about why someone would want to remotely access their computer, we at Feather ask a different question. What don\u2019t we "),Na=t("strong"),Oa=t("em"),_=p("all"),Ha=p(" gain from being able to use the processing power of a desktop PC, anywhere? Here at Feather, we hope to enable a better connected future that blurs the lines between server and client, where society can have access to more powerful computing than ever before, and a world where processing power is as easily accessible as public Wi-Fi."),Ka=i(),wa=t("p"),Aa=t("em"),ss=p("Thanks for reading \u2728"),this.h()},l(u){g=n(u,"P",{});var f=o(g);R=l(f,"Why would anyone want to remotely access their computer? In fact, lets ask this in another way: what do you gain from being able to use the processing power of a desktop PC, anywhere?"),f.forEach(a),N=c(u),x=n(u,"P",{});var ca=o(x);E=l(ca,"The concept of computing began with massive computers - the size of rooms - purpose built for industrial applications. One of these firsts, the CDC 6600 was capable of performing over three million mathematical operations a second. Research and operations that once took hundreds of hours of "),C=n(ca,"EM",{});var us=o(C);S=l(us,"man-power"),us.forEach(a),ue=l(ca,", now required only seconds of computer "),Xe=n(ca,"STRONG",{});var Fa=o(Xe);D=n(Fa,"EM",{});var ts=o(D);ea=l(ts,"processing power"),ts.forEach(a),Fa.forEach(a),va=l(ca,"."),ca.forEach(a),te=c(u),H=n(u,"DIV",{align:!0});var hs=o(H);Me=n(hs,"IMG",{style:!0,src:!0,alt:!0}),hs.forEach(a),O=c(u),De=n(u,"DIV",{align:!0});var Ba=o(De);B=n(Ba,"IMG",{style:!0,src:!0,alt:!0}),Ba.forEach(a),Ve=c(u),ge=n(u,"P",{});var Ya=o(ge);F=l(Ya,"In the decades following, we\u2019ve seen the rise of home computing, a shift towards ultraportable laptops, and the global takeover of smartphones. Now, with even the average household game console capable of over 10 trillion operations (10 TFlops), it\u2019s become clear that the future of computing is going portable. We\u2019re constantly seeking more processing power than ever before and in increasingly small packages. Toss in the growing awareness of owning personal data and information, a shift towards work at home culture, and you have to ask yourself\u2026 what don\u2019t you gain from accessing the resources of a powerful PC from any of your other devices?"),Ya.forEach(a),sa=c(u),P=n(u,"H3",{});var ds=o(P);ta=l(ds,"Removing heat & noise from where you work & play?"),ds.forEach(a),_e=c(u),Ee=n(u,"DIV",{align:!0});var La=o(Ee);J=n(La,"IMG",{style:!0,src:!0,alt:!0}),La.forEach(a),Q=c(u),oe=n(u,"P",{});var ns=o(oe);ha=l(ns,"A powerful computer turns a small room into a sauna in minutes. No matter if you\u2019re rendering the last few minutes of a short film or cranking out killstreaks in the latest FPS, running a PC generates heat which gets uncomfortable, fast. In fact the average high end system in a bedroom increases room temperatures by up to 5-10f above room temperature."),ns.forEach(a),q=c(u),de=n(u,"P",{});var Ua=o(de);We=l(Ua,"Where does remotely accessing your computer come into play? Well, what if we moved the source of the heat somewhere where it can\u2019t bother you? Places where the heat and noise don\u2019t matter as much. By remotely accessing your PC, you can have it run in a dedicated server room, a garage, or even your living room so the heat is out of sight and out of mind."),Ua.forEach(a),$e=c(u),X=n(u,"H3",{});var Za=o(X);Oe=l(Za,"Accessing processing power from anywhere in your house?"),Za.forEach(a),Te=c(u),ee=n(u,"DIV",{align:!0});var os=o(ee);ae=n(os,"IMG",{style:!0,src:!0,alt:!0}),os.forEach(a),V=c(u),me=n(u,"P",{});var Ja=o(me);Fe=l(Ja,"If you own a powerful PC already, why can\u2019t you access its resources from any device in your house? Leaving a noisy PC in a quiet home theater is just unacceptable, and you don\u2019t want to move your desktop around whenever you want it on a different screen."),Ja.forEach(a),fe=c(u),Le=n(u,"P",{});var qa=o(Le);pe=l(qa,"What if you could leave your PC connected to your home office, but still share the processing power around to your TV or laptop elsewhere? You can do the same work and access the same files as you would in your office or use your work PC to run games or enjoy entertainment from a central hub. You purchase one device for all."),qa.forEach(a),xe=c(u),se=n(u,"H3",{});var Ia=o(se);da=l(Ia,"Sharing a file, without ever needing to \u201Cshare\u201D the file?"),Ia.forEach(a),we=c(u),M=n(u,"DIV",{align:!0});var Xa=o(M);na=n(Xa,"IMG",{style:!0,src:!0,alt:!0}),Xa.forEach(a),Y=c(u),$=n(u,"P",{});var ja=o($);be=l(ja,"Sharing files is annoying. It\u2019s become easier than ever to link files for a detailed presentation, or to share an update with your coworkers. The easiest solution however, will always be to run the file natively, never having to move the file at all."),ja.forEach(a),oa=c(u),le=n(u,"P",{});var ps=o(le);ga=l(ps,"What if instead of having to plug your laptop into an HDMI projector, you\u2019re already ready to demo at all times? Instead of sending a file to yourself through email or uploading it on a USB stick to take home, you\u2019ve got access to the file on the computer you\u2019re already on because you\u2019ve never left it. With remote access, your files are already in a central location accessible just like your private cloud. Just log in, and you have your entire workspace ready and waiting all of the files already there as you left them."),ps.forEach(a),K=c(u),U=n(u,"H2",{});var h=o(U);ma=l(h,"What Does Feather Do Different?"),h.forEach(a),L=c(u),je=n(u,"P",{});var v=o(je);Se=l(v,"The concept of remotely accessing a computer itself is not a novel idea. When you think about remotely access however, what are your options? A hardwire solution is permanent, expensive and complex. Remote desktops scale poorly, are complex to set up, and unsecure. Cloud servers have high latency, are prohibitively expensive, and lack user control."),v.forEach(a),pa=c(u),Z=n(u,"P",{});var Ra=o(Z);Ae=l(Ra,"Feather isn\u2019t in the business of being a remote desktop. Feather is built with the goal of providing freedom to how you access compute. Our goal is to enable anyone to turn their home PCs into home servers that load balance processing power across Wi-Fi. After all, why would you stream the text of a web page to a computer and have it end up blurry or try and drive complex games or render jobs on a weak laptop? If your device is better at rendering text and images, while a desktop PC is great at handling intensive processing like games and work, why not let the compute happen where it\u2019s best for it to happen? Our vision of Feather enables this and so much more."),Ra.forEach(a),Ie=c(u),ze=n(u,"H3",{});var ws=o(ze);re=l(ws,"Accelerating any Wi-Fi connected device"),ws.forEach(a),Ge=c(u),ie=n(u,"DIV",{align:!0});var bs=o(ie);k=n(bs,"IMG",{style:!0,src:!0,alt:!0}),bs.forEach(a),W=c(u),Re=n(u,"P",{});var Qa=o(Re);Ne=l(Qa,"Traditional remote access software only allows you to share with similarly sized screens since all they do is record a desktop. Can you imagine trying to use a desktop UI on a smartphone or even a smartwatch? There\u2019s a reason mobile UI is designed the way it is. By splitting the processing power of each application, we can run applications natively on devices and only speed up the parts that need to be improved. Multiple clients can be load balanced across multiple servers at once, and you can accelerate the performance of an entire family\u2019s worth of Chromebooks with a single PC."),Qa.forEach(a),_a=c(u),ye=n(u,"H3",{});var ys=o(ye);Ea=l(ys,"Creating a processing power network"),ys.forEach(a),Ta=c(u),ce=n(u,"DIV",{align:!0});var vs=o(ce);j=n(vs,"IMG",{style:!0,src:!0,alt:!0}),vs.forEach(a),He=c(u),la=n(u,"P",{});var za=o(la);Ma=l(za,"Modern electricity grids load balance power across regions. When production is high in one region, the grid automatically sells power to high demand regions and vice versa. With the average user spending less than 10% of their time never utilizing their devices at peak processing, we waste massive amounts of not only money, but our global processing potential to fulfill rare peaks in our usage."),za.forEach(a),Be=c(u),ra=n(u,"P",{});var et=o(ra);Da=l(et,"What if instead of electricity, we could load balance processing power? If processing power can be anonymized, devices sitting at home can automatically assist neighborhood workplaces and research institutions on processor heavy tasks. In return, when you return home and run the latest triple A title, the now available workplace devices can share their processing with you. The more people on the network, the more processing power available to everyone at once. Together we can upgrade all the devices everyone has, everywhere."),et.forEach(a),Ye=c(u),Ke=n(u,"H3",{});var gs=o(Ke);Wa=l(gs,"Public Wi-Fi nodes and feather light technology"),gs.forEach(a),Ue=c(u),ve=n(u,"DIV",{align:!0});var Va=o(ve);Pe=n(Va,"IMG",{style:!0,src:!0,alt:!0}),Va.forEach(a),z=c(u),Ze=n(u,"P",{});var _s=o(Ze);ia=l(_s,"We are more connected than ever before, and the implementation of 5G enables us to do more over the internet wherever we need to be. By setting up feather nodes in public spaces, we now not only are more connected everywhere, but can do more everywhere. Developers will have a completely new ecosystem of tools to develop around. Imagine smart drones with image recognition powered locally instead of requiring data being sent to servers on the cloud, smart clothing and glasses that can be as thin and small as a Wi-Fi receiver, or even feather light low cost devices with amazing interfaces at the fraction of the cost of a full device. Anyone will be able to develop on this platform, for this platform to enable things that were once never possible before."),_s.forEach(a),Je=c(u),fa=n(u,"P",{});var ls=o(fa);Sa=l(ls,"So to answer the question about why someone would want to remotely access their computer, we at Feather ask a different question. What don\u2019t we "),Na=n(ls,"STRONG",{});var rs=o(Na);Oa=n(rs,"EM",{});var Es=o(Oa);_=l(Es,"all"),Es.forEach(a),rs.forEach(a),Ha=l(ls," gain from being able to use the processing power of a desktop PC, anywhere? Here at Feather, we hope to enable a better connected future that blurs the lines between server and client, where society can have access to more powerful computing than ever before, and a world where processing power is as easily accessible as public Wi-Fi."),ls.forEach(a),Ka=c(u),wa=n(u,"P",{});var Ts=o(wa);Aa=n(Ts,"EM",{});var is=o(Aa);ss=l(is,"Thanks for reading \u2728"),is.forEach(a),Ts.forEach(a),this.h()},h(){Pa(Me,"width","100%"),ya(Me.src,aa="/blog-4-vision-cdc-6600-picture.webp")||d(Me,"src",aa),d(Me,"alt","Thumbnail"),d(H,"align","center"),Pa(B,"width","100%"),ya(B.src,he="/blog-4-vision-cdc-6600-diagram.webp")||d(B,"src",he),d(B,"alt","Thumbnail"),d(De,"align","center"),Pa(J,"width","100%"),ya(J.src,ne="/blog-4-vision-move-heat-and-noise-from-where-you-work-and-play.webp")||d(J,"src",ne),d(J,"alt","Thumbnail"),d(Ee,"align","center"),Pa(ae,"width","100%"),ya(ae.src,ke="/blog-4-vision-access-your-home-office-from-any-device.webp")||d(ae,"src",ke),d(ae,"alt","Thumbnail"),d(ee,"align","center"),Pa(na,"width","100%"),ya(na.src,ka="/blog-4-vision-work-from-home-actually-at-home.webp")||d(na,"src",ka),d(na,"alt","Thumbnail"),d(M,"align","center"),Pa(k,"width","100%"),ya(k.src,y="/blog-4-vision-let-processing-happen-where-its-best.webp")||d(k,"src",y),d(k,"alt","Thumbnail"),d(ie,"align","center"),Pa(j,"width","100%"),ya(j.src,Ca="/blog-4-vision-load-balancing-entire-neighborhoods.webp")||d(j,"src",Ca),d(j,"alt","Thumbnail"),d(ce,"align","center"),Pa(Pe,"width","100%"),ya(Pe.src,xa="/blog-4-vision-processing-power-as-easily-accessible-as-public-wifi.webp")||d(Pe,"src",xa),d(Pe,"alt","Thumbnail"),d(ve,"align","center")},m(u,f){r(u,g,f),e(g,R),r(u,N,f),r(u,x,f),e(x,E),e(x,C),e(C,S),e(x,ue),e(x,Xe),e(Xe,D),e(D,ea),e(x,va),r(u,te,f),r(u,H,f),e(H,Me),r(u,O,f),r(u,De,f),e(De,B),r(u,Ve,f),r(u,ge,f),e(ge,F),r(u,sa,f),r(u,P,f),e(P,ta),r(u,_e,f),r(u,Ee,f),e(Ee,J),r(u,Q,f),r(u,oe,f),e(oe,ha),r(u,q,f),r(u,de,f),e(de,We),r(u,$e,f),r(u,X,f),e(X,Oe),r(u,Te,f),r(u,ee,f),e(ee,ae),r(u,V,f),r(u,me,f),e(me,Fe),r(u,fe,f),r(u,Le,f),e(Le,pe),r(u,xe,f),r(u,se,f),e(se,da),r(u,we,f),r(u,M,f),e(M,na),r(u,Y,f),r(u,$,f),e($,be),r(u,oa,f),r(u,le,f),e(le,ga),r(u,K,f),r(u,U,f),e(U,ma),r(u,L,f),r(u,je,f),e(je,Se),r(u,pa,f),r(u,Z,f),e(Z,Ae),r(u,Ie,f),r(u,ze,f),e(ze,re),r(u,Ge,f),r(u,ie,f),e(ie,k),r(u,W,f),r(u,Re,f),e(Re,Ne),r(u,_a,f),r(u,ye,f),e(ye,Ea),r(u,Ta,f),r(u,ce,f),e(ce,j),r(u,He,f),r(u,la,f),e(la,Ma),r(u,Be,f),r(u,ra,f),e(ra,Da),r(u,Ye,f),r(u,Ke,f),e(Ke,Wa),r(u,Ue,f),r(u,ve,f),e(ve,Pe),r(u,z,f),r(u,Ze,f),e(Ze,ia),r(u,Je,f),r(u,fa,f),e(fa,Sa),e(fa,Na),e(Na,Oa),e(Oa,_),e(fa,Ha),r(u,Ka,f),r(u,wa,f),e(wa,Aa),e(Aa,ss)},p:as,i:as,o:as,d(u){u&&a(g),u&&a(N),u&&a(x),u&&a(te),u&&a(H),u&&a(O),u&&a(De),u&&a(Ve),u&&a(ge),u&&a(sa),u&&a(P),u&&a(_e),u&&a(Ee),u&&a(Q),u&&a(oe),u&&a(q),u&&a(de),u&&a($e),u&&a(X),u&&a(Te),u&&a(ee),u&&a(V),u&&a(me),u&&a(fe),u&&a(Le),u&&a(xe),u&&a(se),u&&a(we),u&&a(M),u&&a(Y),u&&a($),u&&a(oa),u&&a(le),u&&a(K),u&&a(U),u&&a(L),u&&a(je),u&&a(pa),u&&a(Z),u&&a(Ie),u&&a(ze),u&&a(Ge),u&&a(ie),u&&a(W),u&&a(Re),u&&a(_a),u&&a(ye),u&&a(Ta),u&&a(ce),u&&a(He),u&&a(la),u&&a(Be),u&&a(ra),u&&a(Ye),u&&a(Ke),u&&a(Ue),u&&a(ve),u&&a(z),u&&a(Ze),u&&a(Je),u&&a(fa),u&&a(Ka),u&&a(wa)}}}const Bf={slug:"4-power-user-vision",title:"Vision: Sharing The Power of the PC You Already Own",date:"2022-02-02T00:00:00.000Z",summary:"Feather does more for power users. Learn more about how Feather is changing the world of compute.",thumbnail:"/blog-4-vision-vision-Sharing-Thumbnail.webp",tags:["Vision","Article"],author:"Kyle Li"};class Yf extends Rp{constructor(g){super();Pp(this,g,null,Hf,Cp,{})}}var aw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yf,metadata:Bf});export{Zf as _,Qf as a,ew as b,aw as c};
